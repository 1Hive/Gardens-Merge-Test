{"id":"KOHI","dependencies":[{"name":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/dist/esm/useImageExists.js.map","includedInParent":true,"mtime":1594237046834},{"name":"/Users/rodrigoperez/Development/1Hive/honey-pot/package.json","includedInParent":true,"mtime":1597795534337},{"name":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/package.json","includedInParent":true,"mtime":1594237046834},{"name":"./slicedToArray-aa16fe4d.js","loc":{"line":1,"column":36},"parent":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/dist/esm/useImageExists.js","resolved":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/dist/esm/slicedToArray-aa16fe4d.js"},{"name":"./unsupportedIterableToArray-0301d1c7.js","loc":{"line":2,"column":7},"parent":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/dist/esm/useImageExists.js","resolved":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/dist/esm/unsupportedIterableToArray-0301d1c7.js"},{"name":"react","loc":{"line":3,"column":45},"parent":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/@1hive/1hive-ui/dist/esm/useImageExists.js","resolved":"/Users/rodrigoperez/Development/1Hive/honey-pot/node_modules/react/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.useImageExists=a,exports.ImageExists=void 0;var e=require(\"./slicedToArray-aa16fe4d.js\");require(\"./unsupportedIterableToArray-0301d1c7.js\");var t=require(\"react\"),r=864e5;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expireAfter,n=void 0===t?r:t,u=e.size,a=void 0===u?100:u,s=new Map;function i(e,t,r){s.delete(e),s.set(e,{value:t,lastAccess:r}),s.size>a&&s.delete(s.keys().next().value)}return{clear:function(){return s.clear()},delete:function(e){return s.delete(e)},get:function(e){var t=new Date,r=s.get(e);return r?t-r.lastAccess>n?(s.delete(e),null):(i(e,r.value,t),r.value):null},set:function(e,t){i(e,t,new Date)}}}var u=n();function a(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=(0,t.useState)(!1),s=(0,e._)(a,2),i=s[0],l=s[1],o=(0,t.useState)(!0),c=(0,e._)(o,2),d=c[0],v=c[1],f=(0,t.useState)(!1),g=(0,e._)(f,2),p=g[0],x=g[1];return(0,t.useEffect)(function(){var e=new Image,t=setTimeout(function(){return x(!0)},n),a=function(){v(!1),l(!0),u.set(r,!0),s()},s=function(){clearTimeout(t),e&&(e.removeEventListener(\"load\",a),e=null)};return function(){if(!r)return l(!1),void v(!1);u.get(r)?a():(l(!1),v(!0),e.addEventListener(\"load\",a),e.src=r)}(),s},[r,n]),(0,t.useMemo)(function(){return{src:r,displayFallback:p,exists:i,loading:d}},[r,p,i,d])}var s=function(e){var t=e.timeUntilFallback,r=e.src;return(0,e.children)(a(r,t))};exports.ImageExists=s;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":0}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":13}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":20}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":35}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":43}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":56}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":57}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":64}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":68}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":76}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":91}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":93}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":101}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":118}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":120}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":124}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":126}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":134}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":165}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":173}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":217}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":221}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":223}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":231}},{"source":"../../src/lib/cached-map.js","name":"A_DAY","original":{"line":1,"column":6},"generated":{"line":1,"column":240}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":1,"column":14},"generated":{"line":1,"column":242}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":0},"generated":{"line":1,"column":248}},{"source":"../../src/lib/cached-map.js","name":"cachedMap","original":{"line":3,"column":9},"generated":{"line":1,"column":257}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":261}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":265}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":267}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":277}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":284}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":292}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":296}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":306}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":309}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":319}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":57},"generated":{"line":1,"column":322}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":325}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":327}},{"source":"../../src/lib/cached-map.js","name":"expireAfter","original":{"line":3,"column":21},"generated":{"line":1,"column":329}},{"source":"../../src/lib/cached-map.js","name":"expireAfter","original":{"line":3,"column":21},"generated":{"line":1,"column":341}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":348}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":352}},{"source":"../../src/lib/cached-map.js","name":"A_DAY","original":{"line":3,"column":35},"generated":{"line":1,"column":354}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":356}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":358}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":360}},{"source":"../../src/lib/cached-map.js","name":"size","original":{"line":3,"column":42},"generated":{"line":1,"column":362}},{"source":"../../src/lib/cached-map.js","name":"size","original":{"line":3,"column":42},"generated":{"line":1,"column":367}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":374}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":378}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":49},"generated":{"line":1,"column":380}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":3,"column":61},"generated":{"line":1,"column":384}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":4,"column":8},"generated":{"line":1,"column":386}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":4,"column":16},"generated":{"line":1,"column":388}},{"source":"../../src/lib/cached-map.js","name":"Map","original":{"line":4,"column":20},"generated":{"line":1,"column":392}},{"source":"../../src/lib/cached-map.js","name":"update","original":{"line":17,"column":11},"generated":{"line":1,"column":396}},{"source":"../../src/lib/cached-map.js","name":"update","original":{"line":17,"column":11},"generated":{"line":1,"column":405}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":17,"column":18},"generated":{"line":1,"column":407}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":17,"column":23},"generated":{"line":1,"column":409}},{"source":"../../src/lib/cached-map.js","name":"lastAccess","original":{"line":17,"column":30},"generated":{"line":1,"column":411}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":18,"column":4},"generated":{"line":1,"column":414}},{"source":"../../src/lib/cached-map.js","name":"delete","original":{"line":18,"column":10},"generated":{"line":1,"column":416}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":18,"column":17},"generated":{"line":1,"column":423}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":19,"column":4},"generated":{"line":1,"column":426}},{"source":"../../src/lib/cached-map.js","name":"set","original":{"line":19,"column":10},"generated":{"line":1,"column":428}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":19,"column":14},"generated":{"line":1,"column":432}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":19,"column":19},"generated":{"line":1,"column":434}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":19,"column":21},"generated":{"line":1,"column":435}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":19,"column":21},"generated":{"line":1,"column":441}},{"source":"../../src/lib/cached-map.js","name":"lastAccess","original":{"line":19,"column":28},"generated":{"line":1,"column":443}},{"source":"../../src/lib/cached-map.js","name":"lastAccess","original":{"line":19,"column":28},"generated":{"line":1,"column":454}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":9,"column":8},"generated":{"line":1,"column":458}},{"source":"../../src/lib/cached-map.js","name":"size","original":{"line":9,"column":14},"generated":{"line":1,"column":460}},{"source":"../../src/lib/cached-map.js","name":"size","original":{"line":9,"column":21},"generated":{"line":1,"column":465}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":10,"column":6},"generated":{"line":1,"column":468}},{"source":"../../src/lib/cached-map.js","name":"delete","original":{"line":10,"column":12},"generated":{"line":1,"column":470}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":10,"column":19},"generated":{"line":1,"column":477}},{"source":"../../src/lib/cached-map.js","name":"keys","original":{"line":10,"column":25},"generated":{"line":1,"column":479}},{"source":"../../src/lib/cached-map.js","name":"next","original":{"line":10,"column":32},"generated":{"line":1,"column":486}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":10,"column":39},"generated":{"line":1,"column":493}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":500}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":47,"column":9},"generated":{"line":1,"column":506}},{"source":"../../src/lib/cached-map.js","name":"clear","original":{"line":48,"column":4},"generated":{"line":1,"column":507}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":48,"column":11},"generated":{"line":1,"column":513}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":48,"column":17},"generated":{"line":1,"column":524}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":48,"column":17},"generated":{"line":1,"column":531}},{"source":"../../src/lib/cached-map.js","name":"clear","original":{"line":48,"column":23},"generated":{"line":1,"column":533}},{"source":"../../src/lib/cached-map.js","name":"delete","original":{"line":49,"column":4},"generated":{"line":1,"column":542}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":49,"column":12},"generated":{"line":1,"column":549}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":49,"column":12},"generated":{"line":1,"column":558}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":49,"column":19},"generated":{"line":1,"column":561}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":49,"column":19},"generated":{"line":1,"column":568}},{"source":"../../src/lib/cached-map.js","name":"delete","original":{"line":49,"column":25},"generated":{"line":1,"column":570}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":49,"column":32},"generated":{"line":1,"column":577}},{"source":"../../src/lib/cached-map.js","name":"get","original":{"line":50,"column":4},"generated":{"line":1,"column":581}},{"source":"../../src/lib/cached-map.js","name":"get","original":{"line":23,"column":11},"generated":{"line":1,"column":585}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":23,"column":15},"generated":{"line":1,"column":594}},{"source":"../../src/lib/cached-map.js","name":"now","original":{"line":24,"column":10},"generated":{"line":1,"column":597}},{"source":"../../src/lib/cached-map.js","name":"now","original":{"line":24,"column":10},"generated":{"line":1,"column":601}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":24,"column":16},"generated":{"line":1,"column":603}},{"source":"../../src/lib/cached-map.js","name":"Date","original":{"line":24,"column":20},"generated":{"line":1,"column":607}},{"source":"../../src/lib/cached-map.js","name":"cachedEntry","original":{"line":26,"column":10},"generated":{"line":1,"column":612}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":26,"column":24},"generated":{"line":1,"column":614}},{"source":"../../src/lib/cached-map.js","name":"get","original":{"line":26,"column":30},"generated":{"line":1,"column":616}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":26,"column":34},"generated":{"line":1,"column":620}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":28,"column":8},"generated":{"line":1,"column":623}},{"source":"../../src/lib/cached-map.js","name":"cachedEntry","original":{"line":28,"column":9},"generated":{"line":1,"column":630}},{"source":"../../src/lib/cached-map.js","name":"now","original":{"line":33,"column":8},"generated":{"line":1,"column":632}},{"source":"../../src/lib/cached-map.js","name":"cachedEntry","original":{"line":33,"column":14},"generated":{"line":1,"column":634}},{"source":"../../src/lib/cached-map.js","name":"lastAccess","original":{"line":33,"column":26},"generated":{"line":1,"column":636}},{"source":"../../src/lib/cached-map.js","name":"expireAfter","original":{"line":33,"column":39},"generated":{"line":1,"column":647}},{"source":"../../src/lib/cached-map.js","name":"cache","original":{"line":34,"column":6},"generated":{"line":1,"column":650}},{"source":"../../src/lib/cached-map.js","name":"delete","original":{"line":34,"column":12},"generated":{"line":1,"column":652}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":34,"column":19},"generated":{"line":1,"column":659}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":35,"column":13},"generated":{"line":1,"column":662}},{"source":"../../src/lib/cached-map.js","name":"update","original":{"line":38,"column":4},"generated":{"line":1,"column":669}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":38,"column":11},"generated":{"line":1,"column":671}},{"source":"../../src/lib/cached-map.js","name":"cachedEntry","original":{"line":38,"column":16},"generated":{"line":1,"column":673}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":38,"column":28},"generated":{"line":1,"column":675}},{"source":"../../src/lib/cached-map.js","name":"now","original":{"line":38,"column":35},"generated":{"line":1,"column":681}},{"source":"../../src/lib/cached-map.js","name":"cachedEntry","original":{"line":40,"column":11},"generated":{"line":1,"column":684}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":40,"column":23},"generated":{"line":1,"column":686}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":29,"column":13},"generated":{"line":1,"column":693}},{"source":"../../src/lib/cached-map.js","name":"set","original":{"line":51,"column":4},"generated":{"line":1,"column":699}},{"source":"../../src/lib/cached-map.js","name":"set","original":{"line":43,"column":11},"generated":{"line":1,"column":703}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":43,"column":15},"generated":{"line":1,"column":712}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":43,"column":20},"generated":{"line":1,"column":714}},{"source":"../../src/lib/cached-map.js","name":"update","original":{"line":44,"column":4},"generated":{"line":1,"column":717}},{"source":"../../src/lib/cached-map.js","name":"key","original":{"line":44,"column":11},"generated":{"line":1,"column":719}},{"source":"../../src/lib/cached-map.js","name":"value","original":{"line":44,"column":16},"generated":{"line":1,"column":721}},{"source":"../../src/lib/cached-map.js","name":null,"original":{"line":44,"column":23},"generated":{"line":1,"column":723}},{"source":"../../src/lib/cached-map.js","name":"Date","original":{"line":44,"column":27},"generated":{"line":1,"column":727}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":4,"column":0},"generated":{"line":1,"column":735}},{"source":"../../src/hooks/useImageExists.js","name":"srcCache","original":{"line":4,"column":6},"generated":{"line":1,"column":739}},{"source":"../../src/hooks/useImageExists.js","name":"cachedMap","original":{"line":4,"column":17},"generated":{"line":1,"column":741}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":0},"generated":{"line":1,"column":745}},{"source":"../../src/hooks/useImageExists.js","name":"useImageExists","original":{"line":7,"column":16},"generated":{"line":1,"column":754}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":7,"column":31},"generated":{"line":1,"column":756}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":7,"column":36},"generated":{"line":1,"column":759}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":7,"column":36},"generated":{"line":1,"column":763}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":765}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":775}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":782}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":790}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":794}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":804}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":807}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":817}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":56},"generated":{"line":1,"column":820}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":823}},{"source":"../../src/hooks/useImageExists.js","name":"useState","original":{"line":8,"column":30},"generated":{"line":1,"column":826}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":8,"column":39},"generated":{"line":1,"column":828}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":8,"column":39},"generated":{"line":1,"column":830}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":8,"column":39},"generated":{"line":1,"column":841}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":844}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":847}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":849}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":851}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":854}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":856}},{"source":"../../src/hooks/useImageExists.js","name":"exists","original":{"line":8,"column":9},"generated":{"line":1,"column":859}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":861}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":863}},{"source":"../../src/hooks/useImageExists.js","name":"setExists","original":{"line":8,"column":17},"generated":{"line":1,"column":866}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":868}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":870}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":873}},{"source":"../../src/hooks/useImageExists.js","name":"useState","original":{"line":9,"column":32},"generated":{"line":1,"column":876}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":9,"column":41},"generated":{"line":1,"column":878}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":9,"column":41},"generated":{"line":1,"column":880}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":9,"column":41},"generated":{"line":1,"column":891}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":894}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":897}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":899}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":901}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":904}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":906}},{"source":"../../src/hooks/useImageExists.js","name":"loading","original":{"line":9,"column":9},"generated":{"line":1,"column":909}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":911}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":913}},{"source":"../../src/hooks/useImageExists.js","name":"setLoading","original":{"line":9,"column":18},"generated":{"line":1,"column":916}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":918}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":920}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":923}},{"source":"../../src/hooks/useImageExists.js","name":"useState","original":{"line":10,"column":48},"generated":{"line":1,"column":926}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":10,"column":57},"generated":{"line":1,"column":928}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":10,"column":57},"generated":{"line":1,"column":930}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":10,"column":57},"generated":{"line":1,"column":941}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":944}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":947}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":949}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":951}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":954}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":956}},{"source":"../../src/hooks/useImageExists.js","name":"displayFallback","original":{"line":10,"column":9},"generated":{"line":1,"column":959}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":961}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":963}},{"source":"../../src/hooks/useImageExists.js","name":"setDisplayFallback","original":{"line":10,"column":26},"generated":{"line":1,"column":966}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":968}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":7,"column":60},"generated":{"line":1,"column":970}},{"source":"../../src/hooks/useImageExists.js","name":"useMemo","original":{"line":59,"column":9},"generated":{"line":1,"column":973}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":980}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":982}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":984}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":12,"column":12},"generated":{"line":1,"column":995}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":13,"column":8},"generated":{"line":1,"column":1006}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":13,"column":8},"generated":{"line":1,"column":1010}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":13,"column":16},"generated":{"line":1,"column":1012}},{"source":"../../src/hooks/useImageExists.js","name":"Image","original":{"line":13,"column":20},"generated":{"line":1,"column":1016}},{"source":"../../src/hooks/useImageExists.js","name":"fallbackTimer","original":{"line":14,"column":10},"generated":{"line":1,"column":1022}},{"source":"../../src/hooks/useImageExists.js","name":"setTimeout","original":{"line":14,"column":26},"generated":{"line":1,"column":1024}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":15,"column":6},"generated":{"line":1,"column":1035}},{"source":"../../src/hooks/useImageExists.js","name":"setDisplayFallback","original":{"line":15,"column":12},"generated":{"line":1,"column":1046}},{"source":"../../src/hooks/useImageExists.js","name":"setDisplayFallback","original":{"line":15,"column":12},"generated":{"line":1,"column":1053}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":15,"column":31},"generated":{"line":1,"column":1056}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":16,"column":6},"generated":{"line":1,"column":1060}},{"source":"../../src/hooks/useImageExists.js","name":"success","original":{"line":39,"column":10},"generated":{"line":1,"column":1063}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":39,"column":20},"generated":{"line":1,"column":1065}},{"source":"../../src/hooks/useImageExists.js","name":"setLoading","original":{"line":40,"column":6},"generated":{"line":1,"column":1076}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":40,"column":17},"generated":{"line":1,"column":1079}},{"source":"../../src/hooks/useImageExists.js","name":"setExists","original":{"line":41,"column":6},"generated":{"line":1,"column":1082}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":41,"column":16},"generated":{"line":1,"column":1085}},{"source":"../../src/hooks/useImageExists.js","name":"srcCache","original":{"line":42,"column":6},"generated":{"line":1,"column":1088}},{"source":"../../src/hooks/useImageExists.js","name":"set","original":{"line":42,"column":15},"generated":{"line":1,"column":1090}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":42,"column":19},"generated":{"line":1,"column":1094}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":42,"column":24},"generated":{"line":1,"column":1097}},{"source":"../../src/hooks/useImageExists.js","name":"done","original":{"line":43,"column":6},"generated":{"line":1,"column":1100}},{"source":"../../src/hooks/useImageExists.js","name":"done","original":{"line":46,"column":10},"generated":{"line":1,"column":1105}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":46,"column":17},"generated":{"line":1,"column":1107}},{"source":"../../src/hooks/useImageExists.js","name":"clearTimeout","original":{"line":47,"column":6},"generated":{"line":1,"column":1118}},{"source":"../../src/hooks/useImageExists.js","name":"fallbackTimer","original":{"line":47,"column":19},"generated":{"line":1,"column":1131}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":48,"column":10},"generated":{"line":1,"column":1134}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":49,"column":8},"generated":{"line":1,"column":1138}},{"source":"../../src/hooks/useImageExists.js","name":"removeEventListener","original":{"line":49,"column":14},"generated":{"line":1,"column":1140}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":49,"column":34},"generated":{"line":1,"column":1160}},{"source":"../../src/hooks/useImageExists.js","name":"success","original":{"line":49,"column":42},"generated":{"line":1,"column":1167}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":50,"column":8},"generated":{"line":1,"column":1170}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":50,"column":16},"generated":{"line":1,"column":1172}},{"source":"../../src/hooks/useImageExists.js","name":"done","original":{"line":56,"column":11},"generated":{"line":1,"column":1179}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":19,"column":17},"generated":{"line":1,"column":1186}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":20,"column":10},"generated":{"line":1,"column":1197}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":20,"column":11},"generated":{"line":1,"column":1201}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":23,"column":8},"generated":{"line":1,"column":1203}},{"source":"../../src/hooks/useImageExists.js","name":"setExists","original":{"line":21,"column":8},"generated":{"line":1,"column":1210}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":21,"column":18},"generated":{"line":1,"column":1213}},{"source":"../../src/hooks/useImageExists.js","name":"setLoading","original":{"line":22,"column":8},"generated":{"line":1,"column":1221}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":22,"column":19},"generated":{"line":1,"column":1224}},{"source":"../../src/hooks/useImageExists.js","name":"srcCache","original":{"line":26,"column":10},"generated":{"line":1,"column":1227}},{"source":"../../src/hooks/useImageExists.js","name":"get","original":{"line":26,"column":19},"generated":{"line":1,"column":1229}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":26,"column":23},"generated":{"line":1,"column":1233}},{"source":"../../src/hooks/useImageExists.js","name":"success","original":{"line":27,"column":8},"generated":{"line":1,"column":1236}},{"source":"../../src/hooks/useImageExists.js","name":"setExists","original":{"line":31,"column":6},"generated":{"line":1,"column":1241}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":31,"column":16},"generated":{"line":1,"column":1244}},{"source":"../../src/hooks/useImageExists.js","name":"setLoading","original":{"line":32,"column":6},"generated":{"line":1,"column":1247}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":32,"column":17},"generated":{"line":1,"column":1250}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":35,"column":6},"generated":{"line":1,"column":1253}},{"source":"../../src/hooks/useImageExists.js","name":"addEventListener","original":{"line":35,"column":12},"generated":{"line":1,"column":1255}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":35,"column":29},"generated":{"line":1,"column":1272}},{"source":"../../src/hooks/useImageExists.js","name":"success","original":{"line":35,"column":37},"generated":{"line":1,"column":1279}},{"source":"../../src/hooks/useImageExists.js","name":"image","original":{"line":36,"column":6},"generated":{"line":1,"column":1282}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":36,"column":12},"generated":{"line":1,"column":1284}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":36,"column":18},"generated":{"line":1,"column":1288}},{"source":"../../src/hooks/useImageExists.js","name":"init","original":{"line":54,"column":4},"generated":{"line":1,"column":1291}},{"source":"../../src/hooks/useImageExists.js","name":"done","original":{"line":56,"column":11},"generated":{"line":1,"column":1294}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":57,"column":5},"generated":{"line":1,"column":1297}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":57,"column":6},"generated":{"line":1,"column":1298}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":57,"column":11},"generated":{"line":1,"column":1300}},{"source":"../../src/hooks/useImageExists.js","name":"useMemo","original":{"line":59,"column":9},"generated":{"line":1,"column":1305}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":1307}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":1309}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":59,"column":17},"generated":{"line":1,"column":1318}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":60,"column":11},"generated":{"line":1,"column":1329}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":60,"column":11},"generated":{"line":1,"column":1335}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":60,"column":13},"generated":{"line":1,"column":1336}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":60,"column":13},"generated":{"line":1,"column":1340}},{"source":"../../src/hooks/useImageExists.js","name":"displayFallback","original":{"line":60,"column":18},"generated":{"line":1,"column":1342}},{"source":"../../src/hooks/useImageExists.js","name":"displayFallback","original":{"line":60,"column":18},"generated":{"line":1,"column":1358}},{"source":"../../src/hooks/useImageExists.js","name":"exists","original":{"line":60,"column":35},"generated":{"line":1,"column":1360}},{"source":"../../src/hooks/useImageExists.js","name":"exists","original":{"line":60,"column":35},"generated":{"line":1,"column":1367}},{"source":"../../src/hooks/useImageExists.js","name":"loading","original":{"line":60,"column":43},"generated":{"line":1,"column":1369}},{"source":"../../src/hooks/useImageExists.js","name":"loading","original":{"line":60,"column":43},"generated":{"line":1,"column":1377}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":61,"column":5},"generated":{"line":1,"column":1381}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":61,"column":6},"generated":{"line":1,"column":1382}},{"source":"../../src/hooks/useImageExists.js","name":"displayFallback","original":{"line":61,"column":11},"generated":{"line":1,"column":1384}},{"source":"../../src/hooks/useImageExists.js","name":"exists","original":{"line":61,"column":28},"generated":{"line":1,"column":1386}},{"source":"../../src/hooks/useImageExists.js","name":"loading","original":{"line":61,"column":36},"generated":{"line":1,"column":1388}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1392}},{"source":"../../src/hooks/useImageExists.js","name":"ImageExists","original":{"line":65,"column":13},"generated":{"line":1,"column":1396}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":1398}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":1407}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":65,"column":30},"generated":{"line":1,"column":1410}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":65,"column":30},"generated":{"line":1,"column":1414}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":1416}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":65,"column":30},"generated":{"line":1,"column":1418}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":65,"column":49},"generated":{"line":1,"column":1436}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":1438}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":65,"column":49},"generated":{"line":1,"column":1440}},{"source":"../../src/hooks/useImageExists.js","name":"children","original":{"line":66,"column":2},"generated":{"line":1,"column":1444}},{"source":"../../src/hooks/useImageExists.js","name":"children","original":{"line":66,"column":2},"generated":{"line":1,"column":1451}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":27},"generated":{"line":1,"column":1453}},{"source":"../../src/hooks/useImageExists.js","name":"children","original":{"line":65,"column":54},"generated":{"line":1,"column":1455}},{"source":"../../src/hooks/useImageExists.js","name":"useImageExists","original":{"line":66,"column":11},"generated":{"line":1,"column":1465}},{"source":"../../src/hooks/useImageExists.js","name":"src","original":{"line":66,"column":26},"generated":{"line":1,"column":1467}},{"source":"../../src/hooks/useImageExists.js","name":"timeUntilFallback","original":{"line":66,"column":31},"generated":{"line":1,"column":1469}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1474}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1482}},{"source":"../../src/hooks/useImageExists.js","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":1494}}],"sources":{"../../src/hooks/useImageExists.js":"import { useEffect, useMemo, useState } from 'react'\nimport cachedMap from '../lib/cached-map'\n\nconst srcCache = cachedMap()\n\n// Check if a remote image exists and can be loaded within a specific amount of time.\nexport function useImageExists(src, timeUntilFallback = 50) {\n  const [exists, setExists] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [displayFallback, setDisplayFallback] = useState(false)\n\n  useEffect(() => {\n    let image = new Image()\n    const fallbackTimer = setTimeout(\n      () => setDisplayFallback(true),\n      timeUntilFallback\n    )\n\n    const init = () => {\n      if (!src) {\n        setExists(false)\n        setLoading(false)\n        return\n      }\n\n      if (srcCache.get(src)) {\n        success()\n        return\n      }\n\n      setExists(false)\n      setLoading(true)\n\n      // TODO: ensure only one image is loading at a time for a given src.\n      image.addEventListener('load', success)\n      image.src = src\n    }\n\n    const success = () => {\n      setLoading(false)\n      setExists(true)\n      srcCache.set(src, true)\n      done()\n    }\n\n    const done = () => {\n      clearTimeout(fallbackTimer)\n      if (image) {\n        image.removeEventListener('load', success)\n        image = null\n      }\n    }\n\n    init()\n\n    return done\n  }, [src, timeUntilFallback])\n\n  return useMemo(() => {\n    return { src, displayFallback, exists, loading }\n  }, [src, displayFallback, exists, loading])\n}\n\n// render prop\nexport const ImageExists = ({ timeUntilFallback, src, children }) =>\n  children(useImageExists(src, timeUntilFallback))\n","../../src/lib/cached-map.js":"const A_DAY = 1000 * 60 * 60 * 24\n\nfunction cachedMap({ expireAfter = A_DAY, size = 100 } = {}) {\n  const cache = new Map()\n\n  // Delete the first (oldest) entry if we are above `size`. `cache.size`\n  // should never be greater than `size + 1`, so no need for a loop here.\n  function trim() {\n    if (cache.size > size) {\n      cache.delete(cache.keys().next().value)\n    }\n  }\n\n  // We are using delete() then set() to reset the position everytime the\n  // access is refreshed. That way, the oldest entry is always at the first\n  // position and we don’t need to iterate over the entire cache to find it.\n  function update(key, value, lastAccess) {\n    cache.delete(key)\n    cache.set(key, { value, lastAccess })\n    trim()\n  }\n\n  function get(key) {\n    const now = new Date()\n\n    const cachedEntry = cache.get(key)\n\n    if (!cachedEntry) {\n      return null\n    }\n\n    // Expired: delete the entry\n    if (now - cachedEntry.lastAccess > expireAfter) {\n      cache.delete(key)\n      return null\n    }\n\n    update(key, cachedEntry.value, now)\n\n    return cachedEntry.value\n  }\n\n  function set(key, value) {\n    update(key, value, new Date())\n  }\n\n  return {\n    clear: () => cache.clear(),\n    delete: key => cache.delete(key),\n    get,\n    set,\n  }\n}\n\nexport default cachedMap\n"},"lineCount":null}},"error":null,"hash":"61b7f8fccccd1185d00b74d380ccea45","cacheData":{"env":{}}}