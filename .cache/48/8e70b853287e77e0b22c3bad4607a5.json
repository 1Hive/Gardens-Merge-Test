{"id":"ROUr","dependencies":[{"name":"/Users/rodrigoperez/Development/1Hive/honey-pot/.babelrc","includedInParent":true,"mtime":1597347064380},{"name":"/Users/rodrigoperez/Development/1Hive/honey-pot/package.json","includedInParent":true,"mtime":1597795534337},{"name":"./bigNumber","loc":{"line":1,"column":22},"parent":"/Users/rodrigoperez/Development/1Hive/honey-pot/src/lib/conviction.js","resolved":"/Users/rodrigoperez/Development/1Hive/honey-pot/src/lib/bigNumber.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.calculateConviction=v,exports.getCurrentConviction=m,exports.checkConvictionImplementation=p,exports.getCurrentConvictionByEntity=y,exports.getConvictionHistory=b,exports.getConvictionHistoryByEntity=h,exports.getRemainingTimeToPass=g,exports.getConvictionTrend=k,exports.calculateThreshold=S,exports.getMinNeededStake=w,exports.getMaxConviction=x;var t=n(require(\"./bigNumber\"));function n(t){return t&&t.__esModule?t:{default:t}}function e(t,n){return i(t)||o(t,n)||c(t,n)||r()}function r(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function o(t,n){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t)){var e=[],r=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(e.push(u.value),!n||e.length!==n);r=!0);}catch(c){o=!0,i=c}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return e}}function i(t){if(Array.isArray(t))return t}function u(t){return f(t)||l(t)||c(t)||a()}function a(){throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}function c(t,n){if(t){if(\"string\"==typeof t)return s(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return\"Object\"===e&&t.constructor&&(e=t.constructor.name),\"Map\"===e||\"Set\"===e?Array.from(t):\"Arguments\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,n):void 0}}function l(t){if(\"undefined\"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(t){if(Array.isArray(t))return s(t)}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var d=new t.default(\"1\");function v(t,n,e,r){var o=t,i=e,u=r;return n.multipliedBy(u.pow(o)).plus(i.multipliedBy(d.minus(u.pow(o))).div(d.minus(u)))}function m(n,e,r){var o=u(n).pop();if(o){var i=o.time,a=o.totalTokensStaked;return v(e-i,o.conviction,a,r)}return new t.default(\"0\")}function p(t,n){var e=T(t,n).conviction;if(t.length>0){var r=u(t).pop().conviction;r!==e&&console.error(\"Mismatch between solidity and js code on conviction calculation.\",r,e)}}function y(n,e,r,o){if(!e)return new t.default(\"0\");var i=C(n,e);if(!i.length>0)return new t.default(\"0\");var u=T(i,o),a=u.time,c=u.totalTokensStaked;return v(r-a,u.conviction,c,o)}function b(n,e,r,o){for(var i=[],a=e-50*o-1;a<0;)a%o==0&&i.push((0,t.default)(\"0\")),a++;var c=u(n).filter(function(t){return t.time<=a}),l=u(n).filter(function(t){return t.time>a}),f=u(c).pop()||{totalTokensStaked:new t.default(\"0\"),conviction:new t.default(\"0\"),time:0},s=f.totalTokensStaked,d=f.conviction,m=f.time;d=v(a-m,d,s,r);for(var p=0,y=0,b=a;b<=e;b++){for(b%o==0&&i.push(v(p,d,s,r));l.length>y&&l[y].time<=b;)s=l[y++].totalTokensStaked,p=0,d=[].concat(i).pop();p++}return i}function h(t,n,e,r,o){return b(C(t,n),e,r,o)}function g(t,n,e,r){var o=r,i=t,u=n,a=e;return Math.log(o.minus(d).multipliedBy(i).plus(a).div(o.minus(d).multipliedBy(u).plus(a)).toNumber())/Math.log(o.toNumber())}function k(t,n,e,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,i=m(t,e,r);return m(t,e+o,r).minus(i).div(n)}function S(t,n,e,r,o,i){var u=t.div(n);return u.lt(o)?i.multipliedBy(e).div(d.minus(r)).div(o.minus(u).pow(2)):null}function w(t,n){var e=t;return n.negated().multipliedBy(e).plus(e)}function x(t,n){var e=n;return t.div(d.minus(e))}function T(n,r){var o=n.reduce(function(t,n){var o=e(t,3),i=o[0],u=o[1],a=o[2],c=n.totalTokensStaked;return[i=v(n.time-u,i,a,r),u=n.time,c]},[new t.default(\"0\"),0,new t.default(\"0\")]),i=e(o,3);return{conviction:i[0],time:i[1],totalTokensStaked:i[2]}}function C(t,n){return t.filter(function(t){var e=t.entity;return n===e}).map(function(t){return{time:t.time,totalTokensStaked:t.tokensStaked,conviction:t.conviction}})}"},"sourceMaps":{"js":{"mappings":[{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":0}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":13}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":20}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":35}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":43}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":56}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":57}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":64}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":68}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":76}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":96}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":98}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":106}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":127}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":129}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":137}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":167}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":169}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":177}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":206}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":208}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":216}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":237}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":239}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":247}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":276}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":278}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":286}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":309}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":311}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":319}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":338}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":340}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":348}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":367}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":369}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":377}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":395}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":397}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":405}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":422}},{"source":"lib/conviction.js","original":{"line":1,"column":0},"generated":{"line":1,"column":424}},{"source":"lib/conviction.js","original":{"line":1,"column":0},"generated":{"line":1,"column":428}},{"source":"lib/conviction.js","original":{"line":1,"column":0},"generated":{"line":1,"column":430}},{"source":"lib/conviction.js","original":{"line":1,"column":0},"generated":{"line":1,"column":432}},{"source":"lib/conviction.js","original":{"line":1,"column":0},"generated":{"line":1,"column":440}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":456}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":465}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":467}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":470}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":477}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":480}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":482}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":493}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":495}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":496}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":504}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":507}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":516}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":518}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":520}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":523}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":530}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":532}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":536}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":538}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":540}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":544}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":546}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":548}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":552}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":556}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":565}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":569}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":575}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":579}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":589}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":730}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":739}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":741}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":743}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":746}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":749}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":769}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":777}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":784}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":796}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":803}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":806}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":807}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":811}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":813}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":816}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":819}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":821}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":824}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":826}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":833}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":835}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":839}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":843}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":847}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":849}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":851}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":853}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":860}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":874}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":877}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":879}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":881}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":889}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":897}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":899}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":904}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":906}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":914}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":917}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":919}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":928}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":931}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":934}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":938}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":944}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":947}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":950}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":952}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":954}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":956}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":964}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":968}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":971}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":977}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":979}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":987}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":989}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":998}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1006}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1009}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1011}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1017}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1020}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1027}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1030}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1039}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1041}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1044}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1047}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1053}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1061}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1064}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1071}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1073}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1082}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1084}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1087}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1094}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1096}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1100}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1102}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1106}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1108}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1112}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1116}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1125}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1129}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1135}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1139}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1149}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1285}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1294}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1296}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1298}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1301}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1304}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1306}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1307}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1310}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1327}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1329}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1336}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1338}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1340}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1343}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1347}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1349}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1356}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1366}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1375}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1380}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1383}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1389}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1392}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1395}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1401}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1412}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1415}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1417}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1431}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1433}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1435}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1447}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1453}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1461}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1464}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1472}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1474}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1480}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1485}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1488}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1502}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1505}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1548}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1553}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1556}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1558}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1560}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1568}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1571}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1580}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1582}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1585}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1588}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1608}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1616}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1623}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1635}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1642}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1645}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1652}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1658}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1663}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1666}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1675}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1677}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1680}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1683}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1689}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1697}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1700}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1707}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1709}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1712}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1721}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1723}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1725}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1729}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1735}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1738}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1740}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1742}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1752}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1754}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1756}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1764}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1768}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1772}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1774}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1776}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1778}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1782}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1788}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1791}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1793}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1795}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1799}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1801}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1804}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1806}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1809}},{"source":"lib/conviction.js","original":{"line":321,"column":1},"generated":{"line":1,"column":1816}},{"source":"lib/conviction.js","original":{"line":2,"column":0},"generated":{"line":1,"column":1818}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":2,"column":6},"generated":{"line":1,"column":1822}},{"source":"lib/conviction.js","original":{"line":2,"column":14},"generated":{"line":1,"column":1824}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":2,"column":18},"generated":{"line":1,"column":1828}},{"source":"lib/conviction.js","original":{"line":2,"column":14},"generated":{"line":1,"column":1830}},{"source":"lib/conviction.js","original":{"line":2,"column":28},"generated":{"line":1,"column":1838}},{"source":"lib/conviction.js","original":{"line":13,"column":7},"generated":{"line":1,"column":1843}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":13,"column":16},"generated":{"line":1,"column":1852}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":13,"column":36},"generated":{"line":1,"column":1854}},{"source":"lib/conviction.js","name":"initConv","original":{"line":13,"column":48},"generated":{"line":1,"column":1856}},{"source":"lib/conviction.js","name":"amount","original":{"line":13,"column":58},"generated":{"line":1,"column":1858}},{"source":"lib/conviction.js","name":"alpha","original":{"line":13,"column":66},"generated":{"line":1,"column":1860}},{"source":"lib/conviction.js","name":"t","original":{"line":14,"column":8},"generated":{"line":1,"column":1863}},{"source":"lib/conviction.js","name":"t","original":{"line":14,"column":8},"generated":{"line":1,"column":1867}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":14,"column":12},"generated":{"line":1,"column":1869}},{"source":"lib/conviction.js","name":"x","original":{"line":16,"column":8},"generated":{"line":1,"column":1871}},{"source":"lib/conviction.js","name":"amount","original":{"line":16,"column":12},"generated":{"line":1,"column":1873}},{"source":"lib/conviction.js","name":"a","original":{"line":17,"column":8},"generated":{"line":1,"column":1875}},{"source":"lib/conviction.js","name":"alpha","original":{"line":17,"column":12},"generated":{"line":1,"column":1877}},{"source":"lib/conviction.js","name":"y0","original":{"line":19,"column":9},"generated":{"line":1,"column":1879}},{"source":"lib/conviction.js","name":"initConv","original":{"line":15,"column":13},"generated":{"line":1,"column":1886}},{"source":"lib/conviction.js","name":"multipliedBy","original":{"line":20,"column":5},"generated":{"line":1,"column":1888}},{"source":"lib/conviction.js","name":"a","original":{"line":20,"column":18},"generated":{"line":1,"column":1901}},{"source":"lib/conviction.js","name":"pow","original":{"line":20,"column":20},"generated":{"line":1,"column":1903}},{"source":"lib/conviction.js","name":"t","original":{"line":20,"column":24},"generated":{"line":1,"column":1907}},{"source":"lib/conviction.js","name":"plus","original":{"line":21,"column":5},"generated":{"line":1,"column":1911}},{"source":"lib/conviction.js","name":"x","original":{"line":21,"column":10},"generated":{"line":1,"column":1916}},{"source":"lib/conviction.js","name":"multipliedBy","original":{"line":21,"column":12},"generated":{"line":1,"column":1918}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":21,"column":25},"generated":{"line":1,"column":1931}},{"source":"lib/conviction.js","name":"minus","original":{"line":21,"column":31},"generated":{"line":1,"column":1933}},{"source":"lib/conviction.js","name":"a","original":{"line":21,"column":37},"generated":{"line":1,"column":1939}},{"source":"lib/conviction.js","name":"pow","original":{"line":21,"column":39},"generated":{"line":1,"column":1941}},{"source":"lib/conviction.js","name":"t","original":{"line":21,"column":43},"generated":{"line":1,"column":1945}},{"source":"lib/conviction.js","name":"div","original":{"line":21,"column":48},"generated":{"line":1,"column":1950}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":21,"column":52},"generated":{"line":1,"column":1954}},{"source":"lib/conviction.js","name":"minus","original":{"line":21,"column":58},"generated":{"line":1,"column":1956}},{"source":"lib/conviction.js","name":"a","original":{"line":21,"column":64},"generated":{"line":1,"column":1962}},{"source":"lib/conviction.js","original":{"line":32,"column":7},"generated":{"line":1,"column":1967}},{"source":"lib/conviction.js","name":"getCurrentConviction","original":{"line":32,"column":16},"generated":{"line":1,"column":1976}},{"source":"lib/conviction.js","name":"stakes","original":{"line":32,"column":37},"generated":{"line":1,"column":1978}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":32,"column":45},"generated":{"line":1,"column":1980}},{"source":"lib/conviction.js","name":"alpha","original":{"line":32,"column":58},"generated":{"line":1,"column":1982}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":33,"column":8},"generated":{"line":1,"column":1985}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":33,"column":8},"generated":{"line":1,"column":1989}},{"source":"lib/conviction.js","original":{"line":33,"column":20},"generated":{"line":1,"column":1991}},{"source":"lib/conviction.js","name":"stakes","original":{"line":33,"column":24},"generated":{"line":1,"column":1993}},{"source":"lib/conviction.js","name":"pop","original":{"line":33,"column":32},"generated":{"line":1,"column":1996}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":34,"column":6},"generated":{"line":1,"column":2002}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":34,"column":6},"generated":{"line":1,"column":2005}},{"source":"lib/conviction.js","original":{"line":34,"column":17},"generated":{"line":1,"column":2007}},{"source":"lib/conviction.js","name":"time","original":{"line":35,"column":12},"generated":{"line":1,"column":2008}},{"source":"lib/conviction.js","name":"time","original":{"line":35,"column":12},"generated":{"line":1,"column":2012}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":35,"column":52},"generated":{"line":1,"column":2014}},{"source":"lib/conviction.js","name":"time","original":{"line":35,"column":12},"generated":{"line":1,"column":2016}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":35,"column":18},"generated":{"line":1,"column":2021}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":35,"column":52},"generated":{"line":1,"column":2023}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":35,"column":18},"generated":{"line":1,"column":2025}},{"source":"lib/conviction.js","name":"ret","original":{"line":44,"column":11},"generated":{"line":1,"column":2043}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":38,"column":16},"generated":{"line":1,"column":2050}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":39,"column":6},"generated":{"line":1,"column":2052}},{"source":"lib/conviction.js","name":"time","original":{"line":39,"column":20},"generated":{"line":1,"column":2054}},{"source":"lib/conviction.js","name":"lastStake","original":{"line":35,"column":52},"generated":{"line":1,"column":2056}},{"source":"lib/conviction.js","name":"conviction","original":{"line":35,"column":37},"generated":{"line":1,"column":2058}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":41,"column":6},"generated":{"line":1,"column":2069}},{"source":"lib/conviction.js","name":"alpha","original":{"line":42,"column":6},"generated":{"line":1,"column":2071}},{"source":"lib/conviction.js","original":{"line":46,"column":11},"generated":{"line":1,"column":2074}},{"source":"lib/conviction.js","original":{"line":46,"column":11},"generated":{"line":1,"column":2081}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":46,"column":15},"generated":{"line":1,"column":2085}},{"source":"lib/conviction.js","original":{"line":46,"column":11},"generated":{"line":1,"column":2087}},{"source":"lib/conviction.js","original":{"line":46,"column":25},"generated":{"line":1,"column":2095}},{"source":"lib/conviction.js","original":{"line":51,"column":7},"generated":{"line":1,"column":2100}},{"source":"lib/conviction.js","name":"checkConvictionImplementation","original":{"line":51,"column":16},"generated":{"line":1,"column":2109}},{"source":"lib/conviction.js","name":"stakes","original":{"line":51,"column":46},"generated":{"line":1,"column":2111}},{"source":"lib/conviction.js","name":"alpha","original":{"line":51,"column":54},"generated":{"line":1,"column":2113}},{"source":"lib/conviction.js","name":"convictionFromStakes","original":{"line":52,"column":25},"generated":{"line":1,"column":2116}},{"source":"lib/conviction.js","name":"conviction","original":{"line":52,"column":10},"generated":{"line":1,"column":2120}},{"source":"lib/conviction.js","name":"convictionFromStakes","original":{"line":52,"column":25},"generated":{"line":1,"column":2122}},{"source":"lib/conviction.js","name":"stakes","original":{"line":52,"column":46},"generated":{"line":1,"column":2124}},{"source":"lib/conviction.js","name":"alpha","original":{"line":52,"column":54},"generated":{"line":1,"column":2126}},{"source":"lib/conviction.js","name":"conviction","original":{"line":52,"column":10},"generated":{"line":1,"column":2129}},{"source":"lib/conviction.js","name":"stakes","original":{"line":53,"column":6},"generated":{"line":1,"column":2140}},{"source":"lib/conviction.js","name":"stakes","original":{"line":53,"column":6},"generated":{"line":1,"column":2143}},{"source":"lib/conviction.js","name":"length","original":{"line":53,"column":13},"generated":{"line":1,"column":2145}},{"source":"lib/conviction.js","original":{"line":53,"column":22},"generated":{"line":1,"column":2152}},{"source":"lib/conviction.js","original":{"line":53,"column":25},"generated":{"line":1,"column":2154}},{"source":"lib/conviction.js","name":"solidityConviction","original":{"line":54,"column":10},"generated":{"line":1,"column":2155}},{"source":"lib/conviction.js","name":"solidityConviction","original":{"line":54,"column":10},"generated":{"line":1,"column":2159}},{"source":"lib/conviction.js","original":{"line":54,"column":31},"generated":{"line":1,"column":2161}},{"source":"lib/conviction.js","name":"stakes","original":{"line":54,"column":35},"generated":{"line":1,"column":2163}},{"source":"lib/conviction.js","name":"pop","original":{"line":54,"column":43},"generated":{"line":1,"column":2166}},{"source":"lib/conviction.js","name":"conviction","original":{"line":54,"column":49},"generated":{"line":1,"column":2172}},{"source":"lib/conviction.js","name":"solidityConviction","original":{"line":55,"column":8},"generated":{"line":1,"column":2183}},{"source":"lib/conviction.js","name":"conviction","original":{"line":55,"column":31},"generated":{"line":1,"column":2187}},{"source":"lib/conviction.js","name":"console","original":{"line":56,"column":6},"generated":{"line":1,"column":2190}},{"source":"lib/conviction.js","name":"error","original":{"line":56,"column":14},"generated":{"line":1,"column":2198}},{"source":"lib/conviction.js","original":{"line":57,"column":8},"generated":{"line":1,"column":2204}},{"source":"lib/conviction.js","name":"solidityConviction","original":{"line":58,"column":8},"generated":{"line":1,"column":2271}},{"source":"lib/conviction.js","name":"conviction","original":{"line":59,"column":8},"generated":{"line":1,"column":2273}},{"source":"lib/conviction.js","original":{"line":74,"column":7},"generated":{"line":1,"column":2277}},{"source":"lib/conviction.js","name":"getCurrentConvictionByEntity","original":{"line":74,"column":16},"generated":{"line":1,"column":2286}},{"source":"lib/conviction.js","name":"stakes","original":{"line":75,"column":2},"generated":{"line":1,"column":2288}},{"source":"lib/conviction.js","name":"entity","original":{"line":76,"column":2},"generated":{"line":1,"column":2290}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":77,"column":2},"generated":{"line":1,"column":2292}},{"source":"lib/conviction.js","name":"alpha","original":{"line":78,"column":2},"generated":{"line":1,"column":2294}},{"source":"lib/conviction.js","original":{"line":80,"column":6},"generated":{"line":1,"column":2297}},{"source":"lib/conviction.js","name":"entity","original":{"line":80,"column":7},"generated":{"line":1,"column":2301}},{"source":"lib/conviction.js","original":{"line":81,"column":11},"generated":{"line":1,"column":2303}},{"source":"lib/conviction.js","original":{"line":81,"column":11},"generated":{"line":1,"column":2310}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":81,"column":15},"generated":{"line":1,"column":2314}},{"source":"lib/conviction.js","original":{"line":81,"column":11},"generated":{"line":1,"column":2316}},{"source":"lib/conviction.js","original":{"line":81,"column":25},"generated":{"line":1,"column":2324}},{"source":"lib/conviction.js","name":"entityStakes","original":{"line":84,"column":8},"generated":{"line":1,"column":2329}},{"source":"lib/conviction.js","name":"entityStakes","original":{"line":84,"column":8},"generated":{"line":1,"column":2333}},{"source":"lib/conviction.js","name":"stakesByEntity","original":{"line":84,"column":23},"generated":{"line":1,"column":2335}},{"source":"lib/conviction.js","name":"stakes","original":{"line":84,"column":38},"generated":{"line":1,"column":2337}},{"source":"lib/conviction.js","name":"entity","original":{"line":84,"column":46},"generated":{"line":1,"column":2339}},{"source":"lib/conviction.js","original":{"line":86,"column":6},"generated":{"line":1,"column":2342}},{"source":"lib/conviction.js","name":"entityStakes","original":{"line":86,"column":7},"generated":{"line":1,"column":2346}},{"source":"lib/conviction.js","name":"length","original":{"line":86,"column":20},"generated":{"line":1,"column":2348}},{"source":"lib/conviction.js","original":{"line":86,"column":29},"generated":{"line":1,"column":2355}},{"source":"lib/conviction.js","original":{"line":87,"column":11},"generated":{"line":1,"column":2357}},{"source":"lib/conviction.js","original":{"line":87,"column":11},"generated":{"line":1,"column":2364}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":87,"column":15},"generated":{"line":1,"column":2368}},{"source":"lib/conviction.js","original":{"line":87,"column":11},"generated":{"line":1,"column":2370}},{"source":"lib/conviction.js","original":{"line":87,"column":25},"generated":{"line":1,"column":2378}},{"source":"lib/conviction.js","name":"convictionFromStakes","original":{"line":90,"column":50},"generated":{"line":1,"column":2383}},{"source":"lib/conviction.js","name":"convictionFromStakes","original":{"line":90,"column":50},"generated":{"line":1,"column":2387}},{"source":"lib/conviction.js","name":"convictionFromStakes","original":{"line":90,"column":50},"generated":{"line":1,"column":2389}},{"source":"lib/conviction.js","name":"entityStakes","original":{"line":91,"column":4},"generated":{"line":1,"column":2391}},{"source":"lib/conviction.js","name":"alpha","original":{"line":92,"column":4},"generated":{"line":1,"column":2393}},{"source":"lib/conviction.js","name":"time","original":{"line":90,"column":10},"generated":{"line":1,"column":2396}},{"source":"lib/conviction.js","name":"time","original":{"line":90,"column":10},"generated":{"line":1,"column":2398}},{"source":"lib/conviction.js","name":"time","original":{"line":90,"column":10},"generated":{"line":1,"column":2400}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":90,"column":16},"generated":{"line":1,"column":2405}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":90,"column":16},"generated":{"line":1,"column":2407}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":90,"column":16},"generated":{"line":1,"column":2409}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":95,"column":9},"generated":{"line":1,"column":2427}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":95,"column":9},"generated":{"line":1,"column":2434}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":96,"column":4},"generated":{"line":1,"column":2436}},{"source":"lib/conviction.js","name":"time","original":{"line":96,"column":18},"generated":{"line":1,"column":2438}},{"source":"lib/conviction.js","name":"conviction","original":{"line":90,"column":35},"generated":{"line":1,"column":2440}},{"source":"lib/conviction.js","name":"conviction","original":{"line":90,"column":35},"generated":{"line":1,"column":2442}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":98,"column":4},"generated":{"line":1,"column":2453}},{"source":"lib/conviction.js","name":"alpha","original":{"line":99,"column":4},"generated":{"line":1,"column":2455}},{"source":"lib/conviction.js","original":{"line":112,"column":7},"generated":{"line":1,"column":2458}},{"source":"lib/conviction.js","name":"getConvictionHistory","original":{"line":112,"column":16},"generated":{"line":1,"column":2467}},{"source":"lib/conviction.js","name":"stakes","original":{"line":112,"column":37},"generated":{"line":1,"column":2469}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":112,"column":45},"generated":{"line":1,"column":2471}},{"source":"lib/conviction.js","name":"alpha","original":{"line":112,"column":58},"generated":{"line":1,"column":2473}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":112,"column":65},"generated":{"line":1,"column":2475}},{"source":"lib/conviction.js","name":"initTime","original":{"line":117,"column":9},"generated":{"line":1,"column":2478}},{"source":"lib/conviction.js","name":"history","original":{"line":113,"column":8},"generated":{"line":1,"column":2482}},{"source":"lib/conviction.js","name":"history","original":{"line":113,"column":8},"generated":{"line":1,"column":2486}},{"source":"lib/conviction.js","original":{"line":113,"column":18},"generated":{"line":1,"column":2488}},{"source":"lib/conviction.js","name":"initTime","original":{"line":114,"column":6},"generated":{"line":1,"column":2491}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":114,"column":17},"generated":{"line":1,"column":2493}},{"source":"lib/conviction.js","original":{"line":114,"column":31},"generated":{"line":1,"column":2495}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":114,"column":36},"generated":{"line":1,"column":2498}},{"source":"lib/conviction.js","original":{"line":114,"column":47},"generated":{"line":1,"column":2500}},{"source":"lib/conviction.js","name":"initTime","original":{"line":117,"column":9},"generated":{"line":1,"column":2502}},{"source":"lib/conviction.js","original":{"line":117,"column":20},"generated":{"line":1,"column":2504}},{"source":"lib/conviction.js","name":"initTime","original":{"line":118,"column":8},"generated":{"line":1,"column":2507}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":118,"column":19},"generated":{"line":1,"column":2509}},{"source":"lib/conviction.js","original":{"line":118,"column":32},"generated":{"line":1,"column":2512}},{"source":"lib/conviction.js","name":"history","original":{"line":119,"column":6},"generated":{"line":1,"column":2515}},{"source":"lib/conviction.js","name":"push","original":{"line":119,"column":14},"generated":{"line":1,"column":2517}},{"source":"lib/conviction.js","original":{"line":119,"column":19},"generated":{"line":1,"column":2523}},{"source":"lib/conviction.js","original":{"line":119,"column":29},"generated":{"line":1,"column":2525}},{"source":"lib/conviction.js","original":{"line":119,"column":29},"generated":{"line":1,"column":2527}},{"source":"lib/conviction.js","original":{"line":119,"column":29},"generated":{"line":1,"column":2536}},{"source":"lib/conviction.js","name":"initTime","original":{"line":121,"column":4},"generated":{"line":1,"column":2542}},{"source":"lib/conviction.js","name":"oldStakes","original":{"line":124,"column":8},"generated":{"line":1,"column":2546}},{"source":"lib/conviction.js","name":"oldStakes","original":{"line":124,"column":8},"generated":{"line":1,"column":2550}},{"source":"lib/conviction.js","original":{"line":124,"column":20},"generated":{"line":1,"column":2552}},{"source":"lib/conviction.js","name":"stakes","original":{"line":124,"column":24},"generated":{"line":1,"column":2554}},{"source":"lib/conviction.js","name":"filter","original":{"line":124,"column":32},"generated":{"line":1,"column":2557}},{"source":"lib/conviction.js","original":{"line":124,"column":39},"generated":{"line":1,"column":2564}},{"source":"lib/conviction.js","name":"stake","original":{"line":124,"column":39},"generated":{"line":1,"column":2573}},{"source":"lib/conviction.js","name":"stake","original":{"line":124,"column":48},"generated":{"line":1,"column":2576}},{"source":"lib/conviction.js","name":"stake","original":{"line":124,"column":48},"generated":{"line":1,"column":2583}},{"source":"lib/conviction.js","name":"time","original":{"line":124,"column":54},"generated":{"line":1,"column":2585}},{"source":"lib/conviction.js","name":"initTime","original":{"line":124,"column":62},"generated":{"line":1,"column":2591}},{"source":"lib/conviction.js","name":"recentStakes","original":{"line":125,"column":8},"generated":{"line":1,"column":2595}},{"source":"lib/conviction.js","original":{"line":125,"column":23},"generated":{"line":1,"column":2597}},{"source":"lib/conviction.js","name":"stakes","original":{"line":125,"column":27},"generated":{"line":1,"column":2599}},{"source":"lib/conviction.js","name":"filter","original":{"line":125,"column":35},"generated":{"line":1,"column":2602}},{"source":"lib/conviction.js","original":{"line":125,"column":42},"generated":{"line":1,"column":2609}},{"source":"lib/conviction.js","name":"stake","original":{"line":125,"column":42},"generated":{"line":1,"column":2618}},{"source":"lib/conviction.js","name":"stake","original":{"line":125,"column":51},"generated":{"line":1,"column":2621}},{"source":"lib/conviction.js","name":"stake","original":{"line":125,"column":51},"generated":{"line":1,"column":2628}},{"source":"lib/conviction.js","name":"time","original":{"line":125,"column":57},"generated":{"line":1,"column":2630}},{"source":"lib/conviction.js","name":"initTime","original":{"line":125,"column":64},"generated":{"line":1,"column":2635}},{"source":"lib/conviction.js","original":{"line":127,"column":79},"generated":{"line":1,"column":2639}},{"source":"lib/conviction.js","original":{"line":127,"column":79},"generated":{"line":1,"column":2641}},{"source":"lib/conviction.js","name":"oldStakes","original":{"line":128,"column":7},"generated":{"line":1,"column":2643}},{"source":"lib/conviction.js","name":"pop","original":{"line":129,"column":4},"generated":{"line":1,"column":2646}},{"source":"lib/conviction.js","original":{"line":129,"column":13},"generated":{"line":1,"column":2653}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":130,"column":4},"generated":{"line":1,"column":2654}},{"source":"lib/conviction.js","original":{"line":130,"column":23},"generated":{"line":1,"column":2672}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":130,"column":27},"generated":{"line":1,"column":2676}},{"source":"lib/conviction.js","original":{"line":130,"column":23},"generated":{"line":1,"column":2678}},{"source":"lib/conviction.js","original":{"line":130,"column":37},"generated":{"line":1,"column":2686}},{"source":"lib/conviction.js","name":"conviction","original":{"line":131,"column":4},"generated":{"line":1,"column":2691}},{"source":"lib/conviction.js","original":{"line":131,"column":16},"generated":{"line":1,"column":2702}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":131,"column":20},"generated":{"line":1,"column":2706}},{"source":"lib/conviction.js","original":{"line":131,"column":16},"generated":{"line":1,"column":2708}},{"source":"lib/conviction.js","original":{"line":131,"column":30},"generated":{"line":1,"column":2716}},{"source":"lib/conviction.js","name":"time","original":{"line":132,"column":4},"generated":{"line":1,"column":2721}},{"source":"lib/conviction.js","original":{"line":132,"column":10},"generated":{"line":1,"column":2726}},{"source":"lib/conviction.js","name":"oldAmount","original":{"line":127,"column":27},"generated":{"line":1,"column":2729}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":127,"column":8},"generated":{"line":1,"column":2731}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":127,"column":8},"generated":{"line":1,"column":2733}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":127,"column":50},"generated":{"line":1,"column":2751}},{"source":"lib/conviction.js","name":"conviction","original":{"line":127,"column":38},"generated":{"line":1,"column":2753}},{"source":"lib/conviction.js","name":"conviction","original":{"line":127,"column":38},"generated":{"line":1,"column":2755}},{"source":"lib/conviction.js","name":"lastTime","original":{"line":127,"column":66},"generated":{"line":1,"column":2766}},{"source":"lib/conviction.js","name":"time","original":{"line":127,"column":60},"generated":{"line":1,"column":2768}},{"source":"lib/conviction.js","name":"time","original":{"line":127,"column":60},"generated":{"line":1,"column":2770}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":134,"column":2},"generated":{"line":1,"column":2775}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":134,"column":13},"generated":{"line":1,"column":2777}},{"source":"lib/conviction.js","name":"initTime","original":{"line":135,"column":4},"generated":{"line":1,"column":2779}},{"source":"lib/conviction.js","name":"lastTime","original":{"line":135,"column":15},"generated":{"line":1,"column":2781}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":136,"column":4},"generated":{"line":1,"column":2783}},{"source":"lib/conviction.js","name":"oldAmount","original":{"line":137,"column":4},"generated":{"line":1,"column":2785}},{"source":"lib/conviction.js","name":"alpha","original":{"line":138,"column":4},"generated":{"line":1,"column":2787}},{"source":"lib/conviction.js","original":{"line":143,"column":7},"generated":{"line":1,"column":2790}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":140,"column":6},"generated":{"line":1,"column":2794}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":140,"column":6},"generated":{"line":1,"column":2798}},{"source":"lib/conviction.js","original":{"line":140,"column":19},"generated":{"line":1,"column":2800}},{"source":"lib/conviction.js","name":"i","original":{"line":141,"column":6},"generated":{"line":1,"column":2802}},{"source":"lib/conviction.js","original":{"line":141,"column":10},"generated":{"line":1,"column":2804}},{"source":"lib/conviction.js","name":"t","original":{"line":143,"column":11},"generated":{"line":1,"column":2806}},{"source":"lib/conviction.js","name":"initTime","original":{"line":143,"column":15},"generated":{"line":1,"column":2808}},{"source":"lib/conviction.js","name":"t","original":{"line":143,"column":25},"generated":{"line":1,"column":2810}},{"source":"lib/conviction.js","name":"currentTime","original":{"line":143,"column":30},"generated":{"line":1,"column":2813}},{"source":"lib/conviction.js","name":"t","original":{"line":143,"column":43},"generated":{"line":1,"column":2815}},{"source":"lib/conviction.js","original":{"line":143,"column":48},"generated":{"line":1,"column":2819}},{"source":"lib/conviction.js","name":"recentStakes","original":{"line":148,"column":11},"generated":{"line":1,"column":2820}},{"source":"lib/conviction.js","name":"t","original":{"line":144,"column":8},"generated":{"line":1,"column":2824}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":144,"column":12},"generated":{"line":1,"column":2826}},{"source":"lib/conviction.js","original":{"line":144,"column":25},"generated":{"line":1,"column":2829}},{"source":"lib/conviction.js","name":"history","original":{"line":145,"column":6},"generated":{"line":1,"column":2832}},{"source":"lib/conviction.js","name":"push","original":{"line":145,"column":14},"generated":{"line":1,"column":2834}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":145,"column":19},"generated":{"line":1,"column":2839}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":145,"column":39},"generated":{"line":1,"column":2841}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":145,"column":51},"generated":{"line":1,"column":2843}},{"source":"lib/conviction.js","name":"oldAmount","original":{"line":145,"column":61},"generated":{"line":1,"column":2845}},{"source":"lib/conviction.js","name":"alpha","original":{"line":145,"column":72},"generated":{"line":1,"column":2847}},{"source":"lib/conviction.js","name":"recentStakes","original":{"line":148,"column":11},"generated":{"line":1,"column":2851}},{"source":"lib/conviction.js","name":"length","original":{"line":148,"column":24},"generated":{"line":1,"column":2853}},{"source":"lib/conviction.js","name":"i","original":{"line":148,"column":33},"generated":{"line":1,"column":2860}},{"source":"lib/conviction.js","name":"recentStakes","original":{"line":148,"column":38},"generated":{"line":1,"column":2863}},{"source":"lib/conviction.js","name":"i","original":{"line":148,"column":51},"generated":{"line":1,"column":2865}},{"source":"lib/conviction.js","name":"time","original":{"line":148,"column":54},"generated":{"line":1,"column":2868}},{"source":"lib/conviction.js","name":"t","original":{"line":148,"column":62},"generated":{"line":1,"column":2874}},{"source":"lib/conviction.js","name":"oldAmount","original":{"line":149,"column":6},"generated":{"line":1,"column":2877}},{"source":"lib/conviction.js","name":"recentStakes","original":{"line":149,"column":18},"generated":{"line":1,"column":2879}},{"source":"lib/conviction.js","name":"i","original":{"line":149,"column":31},"generated":{"line":1,"column":2881}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":149,"column":36},"generated":{"line":1,"column":2886}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":150,"column":6},"generated":{"line":1,"column":2904}},{"source":"lib/conviction.js","original":{"line":150,"column":19},"generated":{"line":1,"column":2906}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":151,"column":6},"generated":{"line":1,"column":2908}},{"source":"lib/conviction.js","original":{"line":151,"column":17},"generated":{"line":1,"column":2910}},{"source":"lib/conviction.js","name":"history","original":{"line":151,"column":21},"generated":{"line":1,"column":2913}},{"source":"lib/conviction.js","name":"history","original":{"line":151,"column":21},"generated":{"line":1,"column":2920}},{"source":"lib/conviction.js","name":"pop","original":{"line":151,"column":30},"generated":{"line":1,"column":2923}},{"source":"lib/conviction.js","name":"timePassed","original":{"line":153,"column":4},"generated":{"line":1,"column":2929}},{"source":"lib/conviction.js","name":"history","original":{"line":155,"column":9},"generated":{"line":1,"column":2933}},{"source":"lib/conviction.js","name":"history","original":{"line":155,"column":9},"generated":{"line":1,"column":2940}},{"source":"lib/conviction.js","original":{"line":168,"column":7},"generated":{"line":1,"column":2942}},{"source":"lib/conviction.js","name":"getConvictionHistoryByEntity","original":{"line":168,"column":16},"generated":{"line":1,"column":2951}},{"source":"lib/conviction.js","name":"stakes","original":{"line":169,"column":2},"generated":{"line":1,"column":2953}},{"source":"lib/conviction.js","name":"entity","original":{"line":170,"column":2},"generated":{"line":1,"column":2955}},{"source":"lib/conviction.js","name":"time","original":{"line":171,"column":2},"generated":{"line":1,"column":2957}},{"source":"lib/conviction.js","name":"alpha","original":{"line":172,"column":2},"generated":{"line":1,"column":2959}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":173,"column":2},"generated":{"line":1,"column":2961}},{"source":"lib/conviction.js","name":"getConvictionHistory","original":{"line":175,"column":9},"generated":{"line":1,"column":2964}},{"source":"lib/conviction.js","name":"getConvictionHistory","original":{"line":175,"column":9},"generated":{"line":1,"column":2971}},{"source":"lib/conviction.js","name":"stakesByEntity","original":{"line":176,"column":4},"generated":{"line":1,"column":2973}},{"source":"lib/conviction.js","name":"stakes","original":{"line":176,"column":19},"generated":{"line":1,"column":2975}},{"source":"lib/conviction.js","name":"entity","original":{"line":176,"column":27},"generated":{"line":1,"column":2977}},{"source":"lib/conviction.js","name":"time","original":{"line":177,"column":4},"generated":{"line":1,"column":2980}},{"source":"lib/conviction.js","name":"alpha","original":{"line":178,"column":4},"generated":{"line":1,"column":2982}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":179,"column":4},"generated":{"line":1,"column":2984}},{"source":"lib/conviction.js","original":{"line":193,"column":7},"generated":{"line":1,"column":2987}},{"source":"lib/conviction.js","name":"getRemainingTimeToPass","original":{"line":193,"column":16},"generated":{"line":1,"column":2996}},{"source":"lib/conviction.js","name":"threshold","original":{"line":193,"column":39},"generated":{"line":1,"column":2998}},{"source":"lib/conviction.js","name":"conviction","original":{"line":193,"column":50},"generated":{"line":1,"column":3000}},{"source":"lib/conviction.js","name":"amount","original":{"line":193,"column":62},"generated":{"line":1,"column":3002}},{"source":"lib/conviction.js","name":"alpha","original":{"line":193,"column":70},"generated":{"line":1,"column":3004}},{"source":"lib/conviction.js","name":"a","original":{"line":194,"column":8},"generated":{"line":1,"column":3007}},{"source":"lib/conviction.js","name":"a","original":{"line":194,"column":8},"generated":{"line":1,"column":3011}},{"source":"lib/conviction.js","name":"alpha","original":{"line":194,"column":12},"generated":{"line":1,"column":3013}},{"source":"lib/conviction.js","name":"y","original":{"line":195,"column":8},"generated":{"line":1,"column":3015}},{"source":"lib/conviction.js","name":"threshold","original":{"line":195,"column":12},"generated":{"line":1,"column":3017}},{"source":"lib/conviction.js","name":"y0","original":{"line":196,"column":8},"generated":{"line":1,"column":3019}},{"source":"lib/conviction.js","name":"conviction","original":{"line":196,"column":13},"generated":{"line":1,"column":3021}},{"source":"lib/conviction.js","name":"x","original":{"line":197,"column":8},"generated":{"line":1,"column":3023}},{"source":"lib/conviction.js","name":"amount","original":{"line":197,"column":12},"generated":{"line":1,"column":3025}},{"source":"lib/conviction.js","name":"Math","original":{"line":200,"column":4},"generated":{"line":1,"column":3027}},{"source":"lib/conviction.js","name":"Math","original":{"line":200,"column":4},"generated":{"line":1,"column":3034}},{"source":"lib/conviction.js","name":"log","original":{"line":200,"column":9},"generated":{"line":1,"column":3039}},{"source":"lib/conviction.js","name":"a","original":{"line":201,"column":6},"generated":{"line":1,"column":3043}},{"source":"lib/conviction.js","name":"minus","original":{"line":202,"column":9},"generated":{"line":1,"column":3045}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":202,"column":15},"generated":{"line":1,"column":3051}},{"source":"lib/conviction.js","name":"multipliedBy","original":{"line":203,"column":9},"generated":{"line":1,"column":3054}},{"source":"lib/conviction.js","name":"y","original":{"line":203,"column":22},"generated":{"line":1,"column":3067}},{"source":"lib/conviction.js","name":"plus","original":{"line":204,"column":9},"generated":{"line":1,"column":3070}},{"source":"lib/conviction.js","name":"x","original":{"line":204,"column":14},"generated":{"line":1,"column":3075}},{"source":"lib/conviction.js","name":"div","original":{"line":205,"column":9},"generated":{"line":1,"column":3078}},{"source":"lib/conviction.js","name":"a","original":{"line":206,"column":10},"generated":{"line":1,"column":3082}},{"source":"lib/conviction.js","name":"minus","original":{"line":207,"column":13},"generated":{"line":1,"column":3084}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":207,"column":19},"generated":{"line":1,"column":3090}},{"source":"lib/conviction.js","name":"multipliedBy","original":{"line":208,"column":13},"generated":{"line":1,"column":3093}},{"source":"lib/conviction.js","name":"y0","original":{"line":208,"column":26},"generated":{"line":1,"column":3106}},{"source":"lib/conviction.js","name":"plus","original":{"line":209,"column":13},"generated":{"line":1,"column":3109}},{"source":"lib/conviction.js","name":"x","original":{"line":209,"column":18},"generated":{"line":1,"column":3114}},{"source":"lib/conviction.js","name":"toNumber","original":{"line":211,"column":9},"generated":{"line":1,"column":3118}},{"source":"lib/conviction.js","name":"Math","original":{"line":212,"column":8},"generated":{"line":1,"column":3130}},{"source":"lib/conviction.js","name":"log","original":{"line":212,"column":13},"generated":{"line":1,"column":3135}},{"source":"lib/conviction.js","name":"a","original":{"line":212,"column":17},"generated":{"line":1,"column":3139}},{"source":"lib/conviction.js","name":"toNumber","original":{"line":212,"column":19},"generated":{"line":1,"column":3141}},{"source":"lib/conviction.js","original":{"line":227,"column":7},"generated":{"line":1,"column":3153}},{"source":"lib/conviction.js","name":"getConvictionTrend","original":{"line":227,"column":16},"generated":{"line":1,"column":3162}},{"source":"lib/conviction.js","name":"stakes","original":{"line":228,"column":2},"generated":{"line":1,"column":3164}},{"source":"lib/conviction.js","name":"maxConviction","original":{"line":229,"column":2},"generated":{"line":1,"column":3166}},{"source":"lib/conviction.js","name":"time","original":{"line":230,"column":2},"generated":{"line":1,"column":3168}},{"source":"lib/conviction.js","name":"alpha","original":{"line":231,"column":2},"generated":{"line":1,"column":3170}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":232,"column":2},"generated":{"line":1,"column":3173}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":232,"column":2},"generated":{"line":1,"column":3177}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3179}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3189}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3196}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3204}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3208}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3218}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3221}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3231}},{"source":"lib/conviction.js","original":{"line":232,"column":13},"generated":{"line":1,"column":3234}},{"source":"lib/conviction.js","name":"currentConviction","original":{"line":234,"column":8},"generated":{"line":1,"column":3236}},{"source":"lib/conviction.js","name":"getCurrentConviction","original":{"line":234,"column":28},"generated":{"line":1,"column":3238}},{"source":"lib/conviction.js","name":"stakes","original":{"line":234,"column":49},"generated":{"line":1,"column":3240}},{"source":"lib/conviction.js","name":"time","original":{"line":234,"column":57},"generated":{"line":1,"column":3242}},{"source":"lib/conviction.js","name":"alpha","original":{"line":234,"column":63},"generated":{"line":1,"column":3244}},{"source":"lib/conviction.js","name":"futureConviction","original":{"line":236,"column":9},"generated":{"line":1,"column":3247}},{"source":"lib/conviction.js","name":"getCurrentConviction","original":{"line":235,"column":27},"generated":{"line":1,"column":3254}},{"source":"lib/conviction.js","name":"stakes","original":{"line":235,"column":48},"generated":{"line":1,"column":3256}},{"source":"lib/conviction.js","name":"time","original":{"line":235,"column":56},"generated":{"line":1,"column":3258}},{"source":"lib/conviction.js","name":"timeUnit","original":{"line":235,"column":63},"generated":{"line":1,"column":3260}},{"source":"lib/conviction.js","name":"alpha","original":{"line":235,"column":73},"generated":{"line":1,"column":3262}},{"source":"lib/conviction.js","name":"minus","original":{"line":236,"column":26},"generated":{"line":1,"column":3265}},{"source":"lib/conviction.js","name":"currentConviction","original":{"line":236,"column":32},"generated":{"line":1,"column":3271}},{"source":"lib/conviction.js","name":"div","original":{"line":236,"column":51},"generated":{"line":1,"column":3274}},{"source":"lib/conviction.js","name":"maxConviction","original":{"line":236,"column":55},"generated":{"line":1,"column":3278}},{"source":"lib/conviction.js","original":{"line":251,"column":7},"generated":{"line":1,"column":3281}},{"source":"lib/conviction.js","name":"calculateThreshold","original":{"line":251,"column":16},"generated":{"line":1,"column":3290}},{"source":"lib/conviction.js","name":"requested","original":{"line":251,"column":35},"generated":{"line":1,"column":3292}},{"source":"lib/conviction.js","name":"funds","original":{"line":251,"column":46},"generated":{"line":1,"column":3294}},{"source":"lib/conviction.js","name":"supply","original":{"line":251,"column":53},"generated":{"line":1,"column":3296}},{"source":"lib/conviction.js","name":"alpha","original":{"line":251,"column":61},"generated":{"line":1,"column":3298}},{"source":"lib/conviction.js","name":"beta","original":{"line":251,"column":68},"generated":{"line":1,"column":3300}},{"source":"lib/conviction.js","name":"rho","original":{"line":251,"column":74},"generated":{"line":1,"column":3302}},{"source":"lib/conviction.js","name":"share","original":{"line":252,"column":8},"generated":{"line":1,"column":3305}},{"source":"lib/conviction.js","name":"share","original":{"line":252,"column":8},"generated":{"line":1,"column":3309}},{"source":"lib/conviction.js","name":"requested","original":{"line":252,"column":16},"generated":{"line":1,"column":3311}},{"source":"lib/conviction.js","name":"div","original":{"line":252,"column":26},"generated":{"line":1,"column":3313}},{"source":"lib/conviction.js","name":"funds","original":{"line":252,"column":30},"generated":{"line":1,"column":3317}},{"source":"lib/conviction.js","name":"share","original":{"line":254,"column":6},"generated":{"line":1,"column":3320}},{"source":"lib/conviction.js","name":"share","original":{"line":254,"column":6},"generated":{"line":1,"column":3327}},{"source":"lib/conviction.js","name":"lt","original":{"line":254,"column":12},"generated":{"line":1,"column":3329}},{"source":"lib/conviction.js","name":"beta","original":{"line":254,"column":15},"generated":{"line":1,"column":3332}},{"source":"lib/conviction.js","name":"rho","original":{"line":255,"column":11},"generated":{"line":1,"column":3335}},{"source":"lib/conviction.js","name":"multipliedBy","original":{"line":256,"column":7},"generated":{"line":1,"column":3337}},{"source":"lib/conviction.js","name":"supply","original":{"line":256,"column":20},"generated":{"line":1,"column":3350}},{"source":"lib/conviction.js","name":"div","original":{"line":257,"column":7},"generated":{"line":1,"column":3353}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":257,"column":11},"generated":{"line":1,"column":3357}},{"source":"lib/conviction.js","name":"minus","original":{"line":257,"column":17},"generated":{"line":1,"column":3359}},{"source":"lib/conviction.js","name":"alpha","original":{"line":257,"column":23},"generated":{"line":1,"column":3365}},{"source":"lib/conviction.js","name":"div","original":{"line":258,"column":7},"generated":{"line":1,"column":3369}},{"source":"lib/conviction.js","name":"beta","original":{"line":258,"column":11},"generated":{"line":1,"column":3373}},{"source":"lib/conviction.js","name":"minus","original":{"line":258,"column":16},"generated":{"line":1,"column":3375}},{"source":"lib/conviction.js","name":"share","original":{"line":258,"column":22},"generated":{"line":1,"column":3381}},{"source":"lib/conviction.js","name":"pow","original":{"line":258,"column":29},"generated":{"line":1,"column":3384}},{"source":"lib/conviction.js","original":{"line":258,"column":33},"generated":{"line":1,"column":3388}},{"source":"lib/conviction.js","original":{"line":260,"column":11},"generated":{"line":1,"column":3392}},{"source":"lib/conviction.js","original":{"line":274,"column":7},"generated":{"line":1,"column":3397}},{"source":"lib/conviction.js","name":"getMinNeededStake","original":{"line":274,"column":16},"generated":{"line":1,"column":3406}},{"source":"lib/conviction.js","name":"threshold","original":{"line":274,"column":34},"generated":{"line":1,"column":3408}},{"source":"lib/conviction.js","name":"alpha","original":{"line":274,"column":45},"generated":{"line":1,"column":3410}},{"source":"lib/conviction.js","name":"y","original":{"line":275,"column":8},"generated":{"line":1,"column":3413}},{"source":"lib/conviction.js","name":"y","original":{"line":275,"column":8},"generated":{"line":1,"column":3417}},{"source":"lib/conviction.js","name":"threshold","original":{"line":275,"column":12},"generated":{"line":1,"column":3419}},{"source":"lib/conviction.js","name":"a","original":{"line":278,"column":9},"generated":{"line":1,"column":3421}},{"source":"lib/conviction.js","name":"alpha","original":{"line":276,"column":12},"generated":{"line":1,"column":3428}},{"source":"lib/conviction.js","name":"negated","original":{"line":279,"column":5},"generated":{"line":1,"column":3430}},{"source":"lib/conviction.js","name":"multipliedBy","original":{"line":280,"column":5},"generated":{"line":1,"column":3440}},{"source":"lib/conviction.js","name":"y","original":{"line":280,"column":18},"generated":{"line":1,"column":3453}},{"source":"lib/conviction.js","name":"plus","original":{"line":281,"column":5},"generated":{"line":1,"column":3456}},{"source":"lib/conviction.js","name":"y","original":{"line":281,"column":10},"generated":{"line":1,"column":3461}},{"source":"lib/conviction.js","original":{"line":293,"column":7},"generated":{"line":1,"column":3464}},{"source":"lib/conviction.js","name":"getMaxConviction","original":{"line":293,"column":16},"generated":{"line":1,"column":3473}},{"source":"lib/conviction.js","name":"amount","original":{"line":293,"column":33},"generated":{"line":1,"column":3475}},{"source":"lib/conviction.js","name":"alpha","original":{"line":293,"column":41},"generated":{"line":1,"column":3477}},{"source":"lib/conviction.js","name":"x","original":{"line":294,"column":8},"generated":{"line":1,"column":3480}},{"source":"lib/conviction.js","name":"a","original":{"line":295,"column":8},"generated":{"line":1,"column":3484}},{"source":"lib/conviction.js","name":"alpha","original":{"line":295,"column":12},"generated":{"line":1,"column":3486}},{"source":"lib/conviction.js","name":"x","original":{"line":296,"column":9},"generated":{"line":1,"column":3488}},{"source":"lib/conviction.js","name":"amount","original":{"line":294,"column":12},"generated":{"line":1,"column":3495}},{"source":"lib/conviction.js","name":"div","original":{"line":296,"column":11},"generated":{"line":1,"column":3497}},{"source":"lib/conviction.js","name":"oneBN","original":{"line":296,"column":15},"generated":{"line":1,"column":3501}},{"source":"lib/conviction.js","name":"minus","original":{"line":296,"column":21},"generated":{"line":1,"column":3503}},{"source":"lib/conviction.js","name":"a","original":{"line":296,"column":27},"generated":{"line":1,"column":3509}},{"source":"lib/conviction.js","original":{"line":299,"column":0},"generated":{"line":1,"column":3513}},{"source":"lib/conviction.js","name":"convictionFromStakes","original":{"line":299,"column":9},"generated":{"line":1,"column":3522}},{"source":"lib/conviction.js","name":"stakes","original":{"line":299,"column":30},"generated":{"line":1,"column":3524}},{"source":"lib/conviction.js","name":"alpha","original":{"line":299,"column":38},"generated":{"line":1,"column":3526}},{"source":"lib/conviction.js","name":"stakes","original":{"line":300,"column":48},"generated":{"line":1,"column":3529}},{"source":"lib/conviction.js","name":"stakes","original":{"line":300,"column":48},"generated":{"line":1,"column":3533}},{"source":"lib/conviction.js","name":"stakes","original":{"line":300,"column":48},"generated":{"line":1,"column":3535}},{"source":"lib/conviction.js","name":"reduce","original":{"line":300,"column":55},"generated":{"line":1,"column":3537}},{"source":"lib/conviction.js","original":{"line":301,"column":4},"generated":{"line":1,"column":3544}},{"source":"lib/conviction.js","name":"stake","original":{"line":301,"column":38},"generated":{"line":1,"column":3553}},{"source":"lib/conviction.js","name":"stake","original":{"line":301,"column":38},"generated":{"line":1,"column":3555}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3558}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3562}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3564}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3566}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3568}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":301,"column":6},"generated":{"line":1,"column":3571}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3573}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3575}},{"source":"lib/conviction.js","name":"lastTime","original":{"line":301,"column":16},"generated":{"line":1,"column":3578}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3580}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3582}},{"source":"lib/conviction.js","name":"oldAmount","original":{"line":301,"column":26},"generated":{"line":1,"column":3585}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3587}},{"source":"lib/conviction.js","original":{"line":301,"column":48},"generated":{"line":1,"column":3589}},{"source":"lib/conviction.js","name":"amount","original":{"line":302,"column":12},"generated":{"line":1,"column":3592}},{"source":"lib/conviction.js","name":"stake","original":{"line":302,"column":21},"generated":{"line":1,"column":3594}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":302,"column":27},"generated":{"line":1,"column":3596}},{"source":"lib/conviction.js","original":{"line":306,"column":13},"generated":{"line":1,"column":3614}},{"source":"lib/conviction.js","original":{"line":306,"column":13},"generated":{"line":1,"column":3620}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":304,"column":6},"generated":{"line":1,"column":3621}},{"source":"lib/conviction.js","name":"calculateConviction","original":{"line":304,"column":17},"generated":{"line":1,"column":3623}},{"source":"lib/conviction.js","name":"stake","original":{"line":303,"column":25},"generated":{"line":1,"column":3625}},{"source":"lib/conviction.js","name":"time","original":{"line":303,"column":31},"generated":{"line":1,"column":3627}},{"source":"lib/conviction.js","name":"lastTime","original":{"line":303,"column":38},"generated":{"line":1,"column":3632}},{"source":"lib/conviction.js","name":"lastConv","original":{"line":304,"column":49},"generated":{"line":1,"column":3634}},{"source":"lib/conviction.js","name":"oldAmount","original":{"line":304,"column":59},"generated":{"line":1,"column":3636}},{"source":"lib/conviction.js","name":"alpha","original":{"line":304,"column":70},"generated":{"line":1,"column":3638}},{"source":"lib/conviction.js","name":"lastTime","original":{"line":305,"column":6},"generated":{"line":1,"column":3641}},{"source":"lib/conviction.js","name":"stake","original":{"line":305,"column":17},"generated":{"line":1,"column":3643}},{"source":"lib/conviction.js","name":"time","original":{"line":305,"column":23},"generated":{"line":1,"column":3645}},{"source":"lib/conviction.js","name":"amount","original":{"line":306,"column":34},"generated":{"line":1,"column":3650}},{"source":"lib/conviction.js","original":{"line":308,"column":4},"generated":{"line":1,"column":3654}},{"source":"lib/conviction.js","original":{"line":308,"column":5},"generated":{"line":1,"column":3655}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":308,"column":9},"generated":{"line":1,"column":3659}},{"source":"lib/conviction.js","original":{"line":308,"column":5},"generated":{"line":1,"column":3661}},{"source":"lib/conviction.js","original":{"line":308,"column":19},"generated":{"line":1,"column":3669}},{"source":"lib/conviction.js","original":{"line":308,"column":25},"generated":{"line":1,"column":3674}},{"source":"lib/conviction.js","original":{"line":308,"column":28},"generated":{"line":1,"column":3676}},{"source":"lib/conviction.js","name":"BigNumber","original":{"line":308,"column":32},"generated":{"line":1,"column":3680}},{"source":"lib/conviction.js","original":{"line":308,"column":28},"generated":{"line":1,"column":3682}},{"source":"lib/conviction.js","original":{"line":308,"column":42},"generated":{"line":1,"column":3690}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3697}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3699}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3701}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3703}},{"source":"lib/conviction.js","original":{"line":310,"column":9},"generated":{"line":1,"column":3706}},{"source":"lib/conviction.js","original":{"line":310,"column":9},"generated":{"line":1,"column":3712}},{"source":"lib/conviction.js","name":"conviction","original":{"line":310,"column":11},"generated":{"line":1,"column":3713}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3724}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3726}},{"source":"lib/conviction.js","name":"time","original":{"line":310,"column":23},"generated":{"line":1,"column":3729}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3734}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3736}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":310,"column":29},"generated":{"line":1,"column":3739}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3757}},{"source":"lib/conviction.js","original":{"line":299,"column":45},"generated":{"line":1,"column":3759}},{"source":"lib/conviction.js","original":{"line":313,"column":0},"generated":{"line":1,"column":3763}},{"source":"lib/conviction.js","name":"stakesByEntity","original":{"line":313,"column":9},"generated":{"line":1,"column":3772}},{"source":"lib/conviction.js","name":"stakes","original":{"line":313,"column":24},"generated":{"line":1,"column":3774}},{"source":"lib/conviction.js","name":"entity","original":{"line":313,"column":32},"generated":{"line":1,"column":3776}},{"source":"lib/conviction.js","name":"stakes","original":{"line":314,"column":9},"generated":{"line":1,"column":3779}},{"source":"lib/conviction.js","name":"stakes","original":{"line":314,"column":9},"generated":{"line":1,"column":3786}},{"source":"lib/conviction.js","name":"filter","original":{"line":315,"column":5},"generated":{"line":1,"column":3788}},{"source":"lib/conviction.js","original":{"line":315,"column":12},"generated":{"line":1,"column":3795}},{"source":"lib/conviction.js","original":{"line":315,"column":12},"generated":{"line":1,"column":3804}},{"source":"lib/conviction.js","name":"_entity","original":{"line":315,"column":23},"generated":{"line":1,"column":3807}},{"source":"lib/conviction.js","name":"_entity","original":{"line":315,"column":23},"generated":{"line":1,"column":3811}},{"source":"lib/conviction.js","name":"entity","original":{"line":315,"column":15},"generated":{"line":1,"column":3813}},{"source":"lib/conviction.js","name":"entity","original":{"line":315,"column":15},"generated":{"line":1,"column":3815}},{"source":"lib/conviction.js","name":"entity","original":{"line":315,"column":37},"generated":{"line":1,"column":3822}},{"source":"lib/conviction.js","name":"entity","original":{"line":315,"column":37},"generated":{"line":1,"column":3829}},{"source":"lib/conviction.js","name":"_entity","original":{"line":315,"column":48},"generated":{"line":1,"column":3833}},{"source":"lib/conviction.js","name":"map","original":{"line":316,"column":5},"generated":{"line":1,"column":3837}},{"source":"lib/conviction.js","original":{"line":316,"column":9},"generated":{"line":1,"column":3841}},{"source":"lib/conviction.js","original":{"line":316,"column":9},"generated":{"line":1,"column":3850}},{"source":"lib/conviction.js","original":{"line":316,"column":50},"generated":{"line":1,"column":3853}},{"source":"lib/conviction.js","original":{"line":316,"column":50},"generated":{"line":1,"column":3859}},{"source":"lib/conviction.js","name":"time","original":{"line":317,"column":6},"generated":{"line":1,"column":3860}},{"source":"lib/conviction.js","name":"time","original":{"line":316,"column":12},"generated":{"line":1,"column":3865}},{"source":"lib/conviction.js","name":"time","original":{"line":316,"column":12},"generated":{"line":1,"column":3867}},{"source":"lib/conviction.js","name":"totalTokensStaked","original":{"line":318,"column":6},"generated":{"line":1,"column":3872}},{"source":"lib/conviction.js","name":"tokensStaked","original":{"line":316,"column":18},"generated":{"line":1,"column":3890}},{"source":"lib/conviction.js","name":"tokensStaked","original":{"line":316,"column":18},"generated":{"line":1,"column":3892}},{"source":"lib/conviction.js","name":"conviction","original":{"line":319,"column":6},"generated":{"line":1,"column":3905}},{"source":"lib/conviction.js","name":"conviction","original":{"line":316,"column":32},"generated":{"line":1,"column":3916}},{"source":"lib/conviction.js","name":"conviction","original":{"line":316,"column":32},"generated":{"line":1,"column":3918}}],"sources":{"lib/conviction.js":"import BigNumber from './bigNumber'\nconst oneBN = new BigNumber('1')\n/**\n * Calculate the amount of conviction at certain time from an initial conviction\n * and the amount of staked tokens following the formula:\n * `y0 * a ^ t + (x * (1 - a ^ t)) / (1 - a)`.\n * @param {number} timePassed Number of blocks since time 0\n * @param {number} initConv Amount of conviction at time 0\n * @param {number} amount Staked tokens at time 0\n * @param {number} alpha Constant that controls the conviction decay\n * @return {BigNumber} Amount of conviction at time t\n */\nexport function calculateConviction(timePassed, initConv, amount, alpha) {\n  const t = timePassed\n  const y0 = initConv\n  const x = amount\n  const a = alpha\n\n  return y0\n    .multipliedBy(a.pow(t))\n    .plus(x.multipliedBy(oneBN.minus(a.pow(t))).div(oneBN.minus(a)))\n}\n\n/**\n * Get current conviction on a proposal\n * @param {{time: number, tokensStaked: number, totalTokensStaked: number, conviction: number}[]} stakes\n * List of token stakes made on a proposal\n * @param {number} currentTime Current block\n * @param {string} alpha Constant that controls the conviction decay\n * @return {BigNumber} Current conviction\n */\nexport function getCurrentConviction(stakes, currentTime, alpha) {\n  const lastStake = [...stakes].pop()\n  if (lastStake) {\n    const { time, totalTokensStaked, conviction } = lastStake\n\n    // Calculate from last stake to now\n    const ret = calculateConviction(\n      currentTime - time,\n      conviction,\n      totalTokensStaked,\n      alpha\n    )\n    return ret\n  } else {\n    return new BigNumber('0')\n  }\n}\n\n// TODO: Move the following code to tests\nexport function checkConvictionImplementation(stakes, alpha) {\n  const { conviction } = convictionFromStakes(stakes, alpha)\n  if (stakes.length > 0) {\n    const solidityConviction = [...stakes].pop().conviction\n    if (solidityConviction !== conviction) {\n      console.error(\n        'Mismatch between solidity and js code on conviction calculation.',\n        solidityConviction,\n        conviction\n      )\n    }\n  }\n}\n\n/**\n * Get current conviction of an entity on a proposal\n * @param {{time: number, tokensStaked: number, totalTokensStaked: number, conviction: number}[]} stakes\n * List of token stakes made on a proposal\n * @param {string} entity Entity by which we will filter the stakes\n * @param {number} currentTime Current block\n * @param {string} alpha Constant that controls the conviction decay\n * @return {BigNumber} Current conviction\n */\nexport function getCurrentConvictionByEntity(\n  stakes,\n  entity,\n  currentTime,\n  alpha\n) {\n  if (!entity) {\n    return new BigNumber('0')\n  }\n\n  const entityStakes = stakesByEntity(stakes, entity)\n\n  if (!entityStakes.length > 0) {\n    return new BigNumber('0')\n  }\n\n  const { time, totalTokensStaked, conviction } = convictionFromStakes(\n    entityStakes,\n    alpha\n  )\n  // Calculate from last stake to now\n  return calculateConviction(\n    currentTime - time,\n    conviction,\n    totalTokensStaked,\n    alpha\n  )\n}\n\n/**\n * Get total conviction amounts for the last 50 blocks for a certain proposal.\n * @param {{time: number, tokensStaked: number, totalTokensStaked: number, conviction: number}[]} stakes\n * List of token stakes made on a proposal\n * @param {number} currentTime Current block number\n * @param {string} alpha Constant that controls the conviction decay\n * @param {number} timeUnit Number of blocks a time unit has\n * @returns {BigNumber[]} Array with conviction amounts from time t-50 to time t\n */\nexport function getConvictionHistory(stakes, currentTime, alpha, timeUnit) {\n  const history = []\n  let initTime = currentTime - 50 * timeUnit - 1\n\n  // Fill the first spots with 0s if currentTime < 50\n  while (initTime < 0) {\n    if (initTime % timeUnit === 0) {\n      history.push(BigNumber('0'))\n    }\n    initTime++\n  }\n\n  const oldStakes = [...stakes].filter(stake => stake.time <= initTime)\n  const recentStakes = [...stakes].filter(stake => stake.time > initTime)\n\n  let { totalTokensStaked: oldAmount, conviction: lastConv, time: lastTime } = [\n    ...oldStakes,\n  ].pop() || {\n    totalTokensStaked: new BigNumber('0'),\n    conviction: new BigNumber('0'),\n    time: 0,\n  }\n  lastConv = calculateConviction(\n    initTime - lastTime,\n    lastConv,\n    oldAmount,\n    alpha\n  )\n  let timePassed = 0 // age of current conviction amount, reset every time conviction stake is changed.\n  let i = 0\n\n  for (let t = initTime; t <= currentTime; t++) {\n    if (t % timeUnit === 0) {\n      history.push(calculateConviction(timePassed, lastConv, oldAmount, alpha))\n    }\n    // check if new stakes are made at this time\n    while (recentStakes.length > i && recentStakes[i].time <= t) {\n      oldAmount = recentStakes[i++].totalTokensStaked\n      timePassed = 0\n      lastConv = [...history].pop()\n    }\n    timePassed++\n  }\n  return history\n}\n\n/**\n * Get entity's conviction amounts for the last 50 blocks for a certain proposal.\n * @param {{time: number, tokensStaked: number, totalTokensStaked: number, conviction: number}[]} stakes\n * List of token stakes made on a proposal\n * @param {string} entity Entity by which we will filter the stakes\n * @param {number} time Current block number\n * @param {string} alpha Constant that controls the conviction decay\n * @param {number} timeUnit Number of blocks a time unit has\n * @returns {BigNumber[]} Array with conviction amounts from time 0 to `time`\n */\nexport function getConvictionHistoryByEntity(\n  stakes,\n  entity,\n  time,\n  alpha,\n  timeUnit\n) {\n  return getConvictionHistory(\n    stakesByEntity(stakes, entity),\n    time,\n    alpha,\n    timeUnit\n  )\n}\n\n/**\n * Get number of blocks needed in order for a proposal to pass.\n * @param {number} threshold Amount of conviction needed for a proposal to pass\n * @param {number} conviction Current amount of conviction\n * @param {number} amount Current amount of staked tokens\n * @param {number} alpha Constant that controls the conviction decay\n * @returns {number|NaN} Number of blocks needed. It is negative if `conviction\n * > threshold` and `NaN` if conviction will not pass the threshold with the\n * current amount of staked tokens\n */\nexport function getRemainingTimeToPass(threshold, conviction, amount, alpha) {\n  const a = alpha\n  const y = threshold\n  const y0 = conviction\n  const x = amount\n\n  return (\n    Math.log(\n      a\n        .minus(oneBN)\n        .multipliedBy(y)\n        .plus(x)\n        .div(\n          a\n            .minus(oneBN)\n            .multipliedBy(y0)\n            .plus(x)\n        )\n        .toNumber()\n    ) / Math.log(a.toNumber())\n  )\n}\n\n/**\n * Gets conviction trend in percentage for the next `timeUnit` amount of blocks.\n * @param {{time: number, tokensStaked: number, totalTokensStaked: number, conviction: number}[]} stakes\n * List of token stakes made on a proposal\n * @param {number} maxConviction Max conviction possible with current token supply\n * @param {number} time Current block number\n * @param {number} alpha Constant that controls the conviction decay\n * @param {number} timeUnit Number of blocks a time unit has\n * @returns {BigNumber} Number from -1 to 1 that represents the increment or\n * decrement of conviction\n */\nexport function getConvictionTrend(\n  stakes,\n  maxConviction,\n  time,\n  alpha,\n  timeUnit = 5\n) {\n  const currentConviction = getCurrentConviction(stakes, time, alpha)\n  const futureConviction = getCurrentConviction(stakes, time + timeUnit, alpha)\n  return futureConviction.minus(currentConviction).div(maxConviction)\n}\n\n/**\n * Calculate amount of conviction needed for a proposal to pass. It uses the\n * formula: `threshold = (rho * supply) / (1 - alpha) / (beta - (requeted / funds)) ** 2`.\n * @param {number} requested Amount of requested funds\n * @param {number} funds Total amount of funds\n * @param {number} supply Supply of the token being staked\n * @param {number} alpha Constant that controls the decay\n * @param {number} beta Maximum share of funds a proposal can take\n * @param {number} rho Tuning param to set up the threshold (linearly)\n * @returns {BigNumber} Threshold\n */\n\nexport function calculateThreshold(requested, funds, supply, alpha, beta, rho) {\n  const share = requested.div(funds)\n\n  if (share.lt(beta)) {\n    return rho\n      .multipliedBy(supply)\n      .div(oneBN.minus(alpha))\n      .div(beta.minus(share).pow(2))\n  } else {\n    return null\n  }\n}\n\n/**\n * Get the needed stake in order for conviction to arrive a certain threshold\n * at some point in time. We obtain this function isolating `x` from the max\n * conviction formula `y = x / (1 - a), so we know how much tokens are needed\n * to be staked (`x`) in order for conviction to arribe a certain threshold `y`.\n * @param {number} threshold Amount of conviction needed for a proposal to pass\n * @param {number} alpha Constant that controls the decay\n * @returns {BigNumber} Minimum amount of needed staked tokens for a proposal to\n * pass\n */\nexport function getMinNeededStake(threshold, alpha) {\n  const y = threshold\n  const a = alpha\n\n  return a\n    .negated()\n    .multipliedBy(y)\n    .plus(y)\n}\n\n/**\n * Get max conviction possible with current staked tokens. It can also be used\n * to state the 100% of conviction in visuals if the token supply amount is\n * passed. We obtain this function from the conviction formula, by calculating\n * the limit when time `t` is infinite.\n * @param {number} amount Staked tokens\n * @param {number} alpha Constant that controls the decay\n * @returns {BigNumber} Max amount of conviction possible\n */\nexport function getMaxConviction(amount, alpha) {\n  const x = amount\n  const a = alpha\n  return x.div(oneBN.minus(a))\n}\n\nfunction convictionFromStakes(stakes, alpha) {\n  const [conviction, time, totalTokensStaked] = stakes.reduce(\n    ([lastConv, lastTime, oldAmount], stake) => {\n      const amount = stake.totalTokensStaked\n      const timePassed = stake.time - lastTime\n      lastConv = calculateConviction(timePassed, lastConv, oldAmount, alpha)\n      lastTime = stake.time\n      return [lastConv, lastTime, amount]\n    },\n    [new BigNumber('0'), 0, new BigNumber('0')] // Initial conviction, time, and amount to 0\n  )\n  return { conviction, time, totalTokensStaked }\n}\n\nfunction stakesByEntity(stakes, entity) {\n  return stakes\n    .filter(({ entity: _entity }) => entity === _entity)\n    .map(({ time, tokensStaked, conviction }) => ({\n      time,\n      totalTokensStaked: tokensStaked,\n      conviction,\n    }))\n}\n"},"lineCount":null}},"error":null,"hash":"5574af12f54462a7c1eab098f5b37c1d","cacheData":{"env":{}}}