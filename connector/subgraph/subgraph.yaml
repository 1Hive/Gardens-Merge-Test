# Do not edit subgraph.yaml,this is a generated file.
# Instead, edit subgraph.template.yaml and run `yarn manifest-<network>-[staging]`
specVersion: 0.0.2
description: A template for Honey pot subgraph
repository: https://github.com/1hive/honey-pot
schema:
  file: ./schema.graphql
dataSources:
# Kernel
- kind: ethereum/contract
  name: Kernel
  network: xdai
  source:
    abi: Kernel
    address: '0x8ccbeab14b5ac4a431fffc39f4bec4089020a155'
    startBlock: 14861344
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - Agreement
      - Config
      - ConvictionConfig
      - VotingConfig
    abis:
      - name: Agreement
        file: ./abis/Agreement.json
      - name: ConvictionVoting
        file: ./abis/ConvictionVoting.json
      - name: DisputableVoting
        file: ./abis/DisputableVoting.json
      - name: Kernel
        file: ./abis/Kernel.json  
      - name: MiniMeToken
        file: ./abis/MiniMeToken.json   
    eventHandlers:
      - event: NewAppProxy(address,bool,bytes32)
        handler: handleNewAppProxy
    file: ./src/Kernel.ts
templates:
- kind: ethereum/contract
  name: Agreement
  network: xdai
  source:
    abi: Agreement
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - DisputableVoting
      - ConvictionVoting
      - Agreement
      - Token
    abis:
      - name: Agreement
        file: ./abis/Agreement.json
      - name: ConvictionVoting
        file: ./abis/ConvictionVoting.json
      - name: MiniMeToken
        file: ./abis/MiniMeToken.json
      - name: DisputableVoting
        file: ./abis/DisputableVoting.json
    eventHandlers:
      - event: ActionDisputed(indexed uint256,indexed uint256)
        handler: handleActionDisputed
      - event: ActionSettled(indexed uint256,indexed uint256)
        handler: handleActionSettled
      - event: ActionChallenged(indexed uint256,indexed uint256)
        handler: handleActionChallenged
    file: ./src/Agreement.ts
- kind: ethereum/contract
  name: ConvictionVoting
  network: xdai
  source:
    abi: ConvictionVoting
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - ConvictionConfig
      - Proposal
      - Stake
      - StakeHistory
    abis:
      - name: Agreement
        file: ./abis/Agreement.json
      - name: ConvictionVoting
        file: ./abis/ConvictionVoting.json
      - name: MiniMeToken
        file: ./abis/MiniMeToken.json
    eventHandlers:
      - event: ConvictionSettingsChanged(uint256,uint256,uint256,uint256)
        handler: handleConfigChanged
      - event: ProposalAdded(indexed address,indexed uint256,indexed uint256,string,bytes,uint256,bool,address)
        handler: handleProposalAdded
      - event: StakeAdded(indexed address,indexed uint256,uint256,uint256,uint256,uint256)
        handler: handleStakeAdded
      - event: StakeWithdrawn(address,indexed uint256,uint256,uint256,uint256,uint256)
        handler: handleStakeWithdrawn
      - event: ProposalExecuted(indexed uint256,uint256)
        handler: handleProposalExecuted
      - event: ProposalCancelled(indexed uint256)
        handler: handleProposalCancelled
      - event: ProposalPaused(indexed uint256,indexed uint256)
        handler: handleProposalPaused
      - event: ProposalResumed(indexed uint256)
        handler: handleProposalResumed
      - event: ProposalRejected(indexed uint256)
        handler: handleProposalRejected
      - event: ContractPaused(bool)
        handler: handleContractPaused
    file: ./src/ConvictionVoting.ts
- kind: ethereum/contract
  name: DisputableVoting
  network: xdai
  source:
    abi: DisputableVoting
  mapping:
    kind: ethereum/events
    apiVersion: 0.0.4
    language: wasm/assemblyscript
    entities:
      - DisputableVoting
      - ConvictionVoting
      - Agreement
      - Token
    abis:
      - name: DisputableVoting
        file: ./abis/DisputableVoting.json
      - name: ConvictionVoting
        file: ./abis/ConvictionVoting.json
      - name: Agreement
        file: ./abis/Agreement.json
      - name: MiniMeToken
        file: ./abis/MiniMeToken.json
    eventHandlers:
      - event: StartVote(indexed uint256,indexed address,bytes,bytes)
        handler: handleStartVote
      - event: CastVote(indexed uint256,indexed address,bool,address)
        handler: handleCastVote
      - event: PauseVote(indexed uint256,indexed uint256)
        handler: handlePauseVote
      - event: ResumeVote(indexed uint256)
        handler: handleResumeVote
      - event: CancelVote(indexed uint256)
        handler: handleCancelVote
      - event: ExecuteVote(indexed uint256)
        handler: handleExecuteVote
      - event: QuietEndingExtendVote(indexed uint256,bool)
        handler: handleQuietEndingExtendVote
      - event: NewSetting(uint256)
        handler: handleNewSetting
      - event: ChangeRepresentative(indexed address,indexed address)
        handler: handleChangeRepresentative
    file: ./src/DisputableVoting.ts
